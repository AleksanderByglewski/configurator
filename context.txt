--FILE .gitignore
node_modules
assets

--FILE account-aside.php
<?php include_once 'backend/account-personal.php'; ?>

<!-- Sidebar (User info + Account menu) -->
<aside class="col-lg-3 col-md-4 border-end pb-5 mt-n5">
  <div class="position-sticky top-0">
    <div class="text-center pt-5">
      <div class="d-table position-relative mx-auto mt-2 mt-lg-4 pt-5 mb-3">
        <img src="data:image/jpeg;base64,<?= base64_encode($profilePicture) ?>" class="d-block rounded-circle" width="120" alt="<?= htmlspecialchars($username) ?>">
        
        <form id="changeProfileForm" action="backend/account-change-profile.php" method="post" enctype="multipart/form-data">
            <input type="file" id="profilePicture" name="profilePicture" accept="image/*" style="display: none;">
        </form>
        <button type="button" class="change-profile btn btn-icon btn-light bg-white btn-sm border rounded-circle shadow-sm position-absolute bottom-0 end-0 mt-4" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Change picture">
          <i class="bx bx-refresh"></i>
        </button>
      </div>
      <h2 class="h5 mb-1"><?= htmlspecialchars($username) ?></h2>
      <p class="mb-3 pb-3"><?= htmlspecialchars($email ? $email : "") ?></p>
      <button type="button" class="btn btn-secondary w-100 d-md-none mt-n2 mb-3" data-bs-toggle="collapse" data-bs-target="#account-menu">
        <i class="bx bxs-user-detail fs-xl me-2"></i>
        Account menu
        <i class="bx bx-chevron-down fs-lg ms-1"></i>
      </button>
      <div id="account-menu" class="list-group list-group-flush collapse d-md-block">
        <a href="account-details.php" class="list-group-item list-group-item-action d-flex align-items-center ">
          <i class="bx bxs-id-card fs-xl opacity-60 me-2"></i>
          Loads overwiew
        </a>
        <a href="account-route.php" class="list-group-item list-group-item-action d-flex align-items-center">
          <i class="bx bxs-map-alt fs-xl opacity-60 me-2"></i>
          New route
        </a>
        <!-- <a href="account-notifications.html" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="bx bx-bell fs-xl opacity-60 me-2"></i>
                    Notifications
                  </a> -->
        <!-- <a href="account-messages.html" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="bx bx-chat fs-xl opacity-60 me-2"></i>
                    Messages
                  </a>
                  <a href="account-saved-items.html" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="bx bx-bookmark fs-xl opacity-60 me-2"></i>
                    Saved Items
                  </a>
                  <a href="account-collections.html" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="bx bx-collection fs-xl opacity-60 me-2"></i>
                    My Collections
                  </a> -->
        <a href="account-security.php" class="list-group-item list-group-item-action d-flex align-items-center">
          <!-- bx-credit-card-front -->
          <i class="bx bx-lock-alt fs-xl opacity-60 me-2"></i>
          Settings
        </a>
        <a href="backend/account-signout.php" class="list-group-item list-group-item-action d-flex align-items-center">
          <i class="bx bx-log-out fs-xl opacity-60 me-2"></i>
          Sign Out
        </a>
      </div>
    </div>
  </div>
</aside>



<script>
    document.addEventListener('DOMContentLoaded', function() {
        const changeProfileBtn = document.querySelector('.change-profile');
        const profilePictureInput = document.querySelector('#profilePicture');
        const changeProfileForm = document.querySelector('#changeProfileForm');

        changeProfileBtn.addEventListener('click', function() {
            profilePictureInput.click();
        });

        profilePictureInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                changeProfileForm.submit();
            }
        });
    });
</script>

--FILE account-details.php
<?php
//You should probably improve that
include 'backend/account-details.php';  // Include the backend file to get the driver's data
$combinedData = getCombinedDriverData();

// if (empty($driversData)) {
//   echo "No driver data found.";
//   exit;
// }


?>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Folotruck | Account - Details</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Silicon - Multipurpose Technology Bootstrap Template">
  <meta name="keywords" content="bootstrap, business, creative agency, mobile app showcase, saas, fintech, finance, online courses, software, medical, conference landing, services, e-commerce, shopping cart, multipurpose, shop, ui kit, marketing, seo, landing, blog, portfolio, html5, css3, javascript, gallery, slider, touch, creative">
  <meta name="author" content="U24web">

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon and Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Vendor Styles -->
  <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/css/boxicons.min.css" />

  <!-- Main Theme Styles + Bootstrap -->
  <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

  <!-- Page loading styles -->
  <style>
    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    .dark-mode .page-loading {
      background-color: #0b0f19;
    }

    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }

    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .page-loading.active>.page-loading-inner {
      opacity: 1;
    }

    .page-loading-inner>span {
      display: block;
      font-size: 1rem;
      font-weight: normal;
      color: #9397ad;
    }

    .dark-mode .page-loading-inner>span {
      color: #fff;
      opacity: .6;
    }

    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      border: .15em solid #b4b7c9;
      border-right-color: transparent;
      border-radius: 50%;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }

    .dark-mode .page-spinner {
      border-color: rgba(255, 255, 255, .4);
      border-right-color: transparent;
    }

    @-webkit-keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    @keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- Theme mode -->
  <script>
    let mode = window.localStorage.getItem('mode'),
      root = document.getElementsByTagName('html')[0];
    if (mode !== null && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }
  </script>

  <!-- Page loading scripts -->
  <script>
    (function() {
      window.onload = function() {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function() {
          preloader.remove();
        }, 1000);
      };
    })();
  </script>
</head>


<!-- Body -->

<body>

  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>


  <!-- Page wrapper for sticky footer -->
  <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
  <main class="page-wrapper">


    <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->


    <?php include './account-header.php'; ?>



    <!-- Page content -->
    <section class="container pt-5">
      <div class="row">


        <!-- Sidebar (User info + Account menu) -->
        <?php include './account-aside.php'; ?>


        <!-- Account details -->
        <div class="col-md-8 offset-lg-1 pb-5 mb-2 mb-lg-4 pt-md-5 mt-n3 mt-md-0">
          <div class="ps-md-3 ps-lg-0 mt-md-2 py-md-4">
            <!-- Light table with hoverable rows -->
            <div class="accordion border rounded-3" id="accordionAlt">
              <!-- Item -->
              <div class="accordion-item border border-bottom-0 border-top-0 after-none" id="filterAccordion">
                <h3 class="px-0 accordion-header" id="headingOne">
                  <button class="accordion-button after-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    <div class="container">
                      <div class="row">
                        <div class="col-3">
                          <div class="pb-2">Search Truck</div>
                          <input id="numberFilter"  class="rounded-0 px-1 form-control form-control-sm py-0" placeholder="Truck number" value="" required="">



                        </div>
                        <div class="col-3">
                          <div class="pb-2">Origin</div>
                          <input id="originFilter" class="rounded-0 px-1 form-control form-control-sm py-0" placeholder="Origin" value="" required="">


                        </div>
                        <div class="col-3">
                          <div class="pb-2">Destination</div>
                          <input id="destinationFilter" class="rounded-0 px-1 form-control form-control-sm py-0" placeholder="Destination" value="" required="">

                        </div>
                        <div class="col-3">
                          <div class="pb-2">Submission date</div>
                          <input id="dateFilter" class="rounded-0 px-1 form-control form-control-sm py-0" placeholder="Submission date" value="" required="">

                        </div>
                      </div>
                    </div>
                  </button>
                </h3>
              </div>


              <?php
              $counter = 0;
              foreach ($combinedData as $data) {
                $driver = $data['driverData'];
                $individualData = $data['individualData'];
                $counter++;
                $heading="heading".  $counter;
                $identificator="collapse".  $counter;

              ?>

              <div class="accordion-item border border-bottom-0">
                  <h3 class="accordion-header" id="<?php echo $heading;?>">
                    <button class="accordion-button collapsed" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#<?php echo $identificator;?>"
                     aria-expanded="false" aria-controls="<?php echo $identificator;?>">
                      <div class="container">
                        <div class="row">
                          <div class="col-3" data-filter="number"><?php  echo  htmlspecialchars($driver['phone_number']) ;?></div>
                          <div class="col-3" data-filter="location"><?php  echo  htmlspecialchars($driver['start_destination']) ;?></div>
                          <div class="col-3" data-filter="destination"><?php  echo  htmlspecialchars($driver['end_destination']) ;?></div>
                          <div class="col-3" data-filter="date"><?php echo htmlspecialchars(isset($driver['submission_time']) ? $driver['submission_time'] : ''); ?></div>
                        </div>
                      </div>
                    </button>
                  </h3>
                  <div id="<?php echo $identificator;?>" class="accordion-collapse collapse" aria-labelledby="heading9" data-bs-parent="#accordionAlt">
                    <div class="accordion-body " style="padding: var(--si-accordion-btn-padding-y) calc(var(--si-accordion-btn-padding-x) + calc(var(--si-gutter-x)*.5))  !important ;">
                    
                    <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark" for="input-base  ">Truck number: </div><span class=""><?php  echo  htmlspecialchars($driver['name']) ;?></span>
                      </div>

                      <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark" for="input-base  ">Route: </div>
                        <span class="fw-500 text-dark" for="input-base  "> 
                        <?php
                        $startDestination = htmlspecialchars($driver['start_destination']);
                        $middleDestination = htmlspecialchars($driver['middle_destination']);
                        $endDestination = htmlspecialchars($driver['end_destination']);

                        $renderedRoute = $startDestination;

                        if (!empty($middleDestination)) {
                            $renderedRoute .= '-&gt;' . $middleDestination;
                        }

                        $renderedRoute .= '-&gt;' . $endDestination;

                        echo $renderedRoute;?>
                        </span>
                      </div>


                    <?php 

                    $individualData = $data['individualData'];
                    foreach ($individualData as $data){
                    $renderer = new MessageRenderer($data);
                    echo $renderer->renderMessage($data);


                    }
                    ?>
                    <?php 
                    // echo "User id:" .  $userId;
                    // echo "Driver id:" . $driver['driver_id'];
                    ?>

                      <?php
                      // $userId =  $userId;
                      // $driverId = $driver['driver_id'];

                      // $dataFetcher = new UserDriverDataFetcher($userId, $driverId);
                      // $singular_data = $dataFetcher->fetchData();



                      ?>
                      <!-- <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark" for="input-base  ">Truck number: </div><span class="">Result</span>
                      </div> -->


                

                      <?php
                      // foreach ($singular_data as $row) {
                        // Process and display the data as needed
                        // echo 'ID: ' . htmlspecialchars($row['data_id']) . '<br>';
                        // echo 'Type: ' . htmlspecialchars($row['message_type']) . '<br>';
                        // echo 'Time: ' . htmlspecialchars($row['message_time']) . '<br>';
                        // echo 'Value: ' . htmlspecialchars($row['message_value']) . '<br>';
                        // echo 'Image: ' . htmlspecialchars($row['message_image']) . '<br><br>';
                        //   $renderer = new UserDriverDataRenderer($row);
                        //   echo $renderer->render();
                        // }
                    ?>

                      <!-- <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark" for="input-base  ">Loaded: </div><span class="">12:42
                          30-09-2023</span>
                      </div>

                      <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark" for="input-base  ">Unloaded: </div><span class="">12:45
                          30-09-2023</span>
                      </div> -->


                      <!-- <div class="mb-3 d-flex">
                        <div class="fw-500 text-dark " for="input-base  ">Delays: </div> -->

                        <!-- <div>

                          <div class="d-flex">
                            <div class="fw-500 text-dark " for="input-base  ">Delay 1: </div>
                            <div class="">
                              <div class="">12:45 30-09-2023</div>
                              <div class="">Paris , 300 minutes</div>
                              <div class="">Heavy traffic jam near Paris </div>
                            </div>
                          </div>

                         
                          <div class="d-flex">
                            <div class="fw-500 text-dark " for="input-base  ">Delay 2: </div>
                            <div class="">
                              <div class="">12:45 02-10-2023</div>
                              <div class="">Barcelona, 600minutes</div>
                              <div class="">Truck's engine has problems, scheduled a visit at service. </div>
                            </div>
                          </div>
                        </div> -->

                      <!-- </div> -->

                      <!-- <div class="mb-3">
                        <div class="fw-500 text-dark" for="input-base  ">CMR: </div>
                        <div class="mt-2"><img src="/assets//img/folo/CMR2.jpg"></div>
                        <div class="mt-2"><img src="/assets//img/folo/CMR1.jpg"></div>
                      </div>
 -->


                    </div>
                  </div>
                </div>
              <?php }?>


              <!-- <div class="accordion-item border border-bottom-0">
                <h3 class="accordion-header" id="heading9">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="false" aria-controls="collapse9">
                    <div class="container">
                      <div class="row">
                        <div class="col-3">KH2073A</div>
                        <div class="col-3">Paris</div>
                        <div class="col-3">Malaga</div>
                        <div class="col-3">16:00 30-09-2023</div>
                      </div>
                    </div>
                  </button>
                </h3>
                <div id="collapse9" class="accordion-collapse collapse" aria-labelledby="heading9" data-bs-parent="#accordionAlt">
                  <div class="accordion-body " style="padding: var(--si-accordion-btn-padding-y) calc(var(--si-accordion-btn-padding-x) + calc(var(--si-gutter-x)*.5))  !important ;">

                    <div class="mb-3 d-flex">
                      <div class="fw-500 text-dark" for="input-base  ">Truck number: </div><span class="">This is mockup data</span>
                    </div>

                    <div class="mb-3 d-flex">
                      <div class="fw-500 text-dark" for="input-base  ">Route: </div>
                      <span class="fw-500 text-dark" for="input-base  ">Paris-Barcelona-Malaga -></span> <span class="fw-500 text-dark" for="input-base  ">Paris-Barcelona-Malaga:</span>
                    </div>

                    <div class="mb-3 d-flex">
                      <div class="fw-500 text-dark" for="input-base  ">Loaded: </div><span class="">12:42
                        30-09-2023</span>
                    </div>

                    <div class="mb-3 d-flex">
                      <div class="fw-500 text-dark" for="input-base  ">Unloaded: </div><span class="">12:45
                        30-09-2023</span>
                    </div>


                    <div class="mb-3 d-flex">
                      <div class="fw-500 text-dark " for="input-base  ">Delays: </div>

                      <div>

                        <div class="d-flex">
                          <div class="fw-500 text-dark " for="input-base  ">Delay 1: </div>
                          <div class="">
                            <div class="">12:45 30-09-2023</div>
                            <div class="">Paris , 300 minutes</div>
                            <div class="">Heavy traffic jam near Paris </div>
                          </div>
                        </div>

                        
                        <div class="d-flex">
                          <div class="fw-500 text-dark " for="input-base  ">Delay 2: </div>
                          <div class="">
                            <div class="">12:45 02-10-2023</div>
                            <div class="">Barcelona, 600minutes</div>
                            <div class="">Truck's engine has problems, scheduled a visit at service. </div>
                          </div>
                        </div>
                      </div>

                    </div>

                    <div class="mb-3">
                      <div class="fw-500 text-dark" for="input-base  ">CMR: </div>
                      <div class="mt-2"><img src="/assets//img/folo/CMR2.jpg"></div>
                      <div class="mt-2"><img src="/assets//img/folo/CMR1.jpg"></div>
                    </div>



                  </div>
                </div>
              </div> -->

        

           
           


            </div>
          </div>
        </div>
      </div>
    </section>
  </main>


  <!-- Footer -->
  <footer class="footer dark-mode bg-dark border-top border-light pt-5 pb-4 pb-lg-5">
    <div class="container pt-lg-4">
      <div class="row pb-5">
        <div class="col-lg-4 col-md-6">
          <div class="navbar-brand text-dark p-0 me-0 mb-3 mb-lg-4">
            <img class="logo" src="assets/img/logo-white-text.png" width="140" alt="Silicon">
            <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

          </div>
          <p class="fs-sm text-light opacity-70 pb-lg-3 mb-4">Proin ipsum pharetra, senectus eget scelerisque varius
            pretium platea velit. Lacus, eget eu vitae nullam proin turpis etiam mi sit. Non feugiat feugiat egestas
            nulla nec. Arcu tempus, eget elementum dolor ullamcorper sodales ultrices eros.</p>
          <form class="needs-validation" novalidate>
            <label for="subscr-email" class="form-label">Subscribe to our newsletter</label>
            <div class="input-group">
              <input type="email" id="subscr-email" class="form-control rounded-start ps-5" placeholder="Your email" required>
              <i class="bx bx-envelope fs-lg text-muted position-absolute top-50 start-0 translate-middle-y ms-3 zindex-5"></i>
              <div class="invalid-tooltip position-absolute top-100 start-0">Please provide a valid email address.</div>
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </div>
          </form>
        </div>
        <div class="col-xl-6 col-lg-7 col-md-5 offset-xl-2 offset-md-1 pt-4 pt-md-1 pt-lg-0">
          <div id="footer-links" class="row">
            <div class="col-lg-4">
              <h6 class="mb-2">
                <a href="#useful-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Useful Links</a>
              </h6>
              <div id="useful-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column pb-lg-1 mb-lg-3">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Home</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">About</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Services</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Our Clients</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">News</a></li>
                </ul>
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Terms &amp;
                      Conditions</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Privacy Policy</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-3">
              <h6 class="mb-2">
                <a href="#social-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Socials</a>
              </h6>
              <div id="social-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Facebook</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">LinkedIn</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Twitter</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Instagram</a></li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-5 pt-2 pt-lg-0">
              <h6 class="mb-2">Contact Us</h6>
              <a href="mailto:email@u24web.com" class="fw-medium">email@u24web.com</a>
            </div>
          </div>
        </div>
      </div>
      <p class="nav d-block fs-xs text-center text-md-start pb-2 pb-lg-0 mb-0">
        <span class="text-light opacity-50">&copy; All rights reserved. Made by </span>
        <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
      </p>
    </div>
  </footer>

  <script>
document.addEventListener('DOMContentLoaded', () => {
    const filters = {
        number: document.getElementById('numberFilter'),
        location: document.getElementById('originFilter'),
        destination: document.getElementById('destinationFilter'),
        date: document.getElementById('dateFilter')
    };

    Object.values(filters).forEach(filterInput => {
        filterInput.addEventListener('input', () => filterAccordions());
    });

    const filterAccordions = () => {
        const accordionItems = document.querySelectorAll('.accordion-item');

        accordionItems.forEach(item => {
          if (item.id === 'filterAccordion') return;

          let shouldDisplay = true;
            
            Object.keys(filters).forEach(key => {
                const filterValue = filters[key].value.trim().toLowerCase();
                const columnElement = item.querySelector(`[data-filter="${key}"]`);
                const columnText = columnElement ? columnElement.textContent.trim().toLowerCase() : '';
                
                if (filterValue && !columnText.includes(filterValue)) {
                        shouldDisplay = false;
                    }
            });

            item.style.display = shouldDisplay ? 'block' : 'none';
        });
    };
});



  </script>


  <!-- Back to top button -->
  <a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
  </a>


  <!-- Vendor Scripts -->
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script src="assets/vendor/cleave.js/dist/cleave.min.js"></script>

  <!-- Main Theme Script -->
  <script src="assets/js/theme.min.js"></script>
</body>

</html>

--FILE account-header.php
  
  <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->


    <header class="header navbar navbar-expand-lg bg-light  bg-secondary border-bottom border-secondary fixed-top">
      <div class="container px-3">
        <a href="index.php" class="navbar-brand ">
  
          <img class="logo" src="assets/img/logo.svg" width="140" alt="Silicon">
          <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

        </a>
        <div id="navbarNav" class="offcanvas offcanvas-end">
          <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <!-- <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Landings</a>
                <div class="dropdown-menu p-0">
                  <div class="d-lg-flex">
                    <div
                      class="mega-dropdown-column bg-position-center bg-repeat-0 bg-size-cover rounded-3 rounded-end-0"
                      style="background-image: url(assets/img/landings.jpg); margin: -1px;"></div>
                    <div class="mega-dropdown-column pt-lg-3 pb-lg-4">
                      <ul class="list-unstyled mb-0">
                        <li><a href="index.html" class="dropdown-item">Template Intro Page</a></li>
                        <li><a href="landing-mobile-app-showcase-v1.html" class="dropdown-item">Mobile App Showcase
                            v.1</a></li>
                        <li><a href="landing-mobile-app-showcase-v2.html" class="dropdown-item">Mobile App Showcase
                            v.2</a></li>
                        <li><a href="landing-saas-v1.html" class="dropdown-item">SaaS v.1</a></li>
                        <li><a href="landing-saas-v2.html" class="dropdown-item">SaaS v.2</a></li>
                        <li><a href="landing-saas-v3.html" class="dropdown-item">SaaS v.3</a></li>
                        <li><a href="landing-financial.html" class="dropdown-item">Financial Consulting</a></li>
                        <li><a href="landing-online-courses.html" class="dropdown-item">Online Courses</a></li>
                      </ul>
                    </div>
                    <div class="mega-dropdown-column pt-lg-3 pb-lg-4">
                      <ul class="list-unstyled mb-0">
                        <li><a href="landing-medical.html" class="dropdown-item">Medical</a></li>
                        <li><a href="landing-software-company.html" class="dropdown-item">IT (Software) Company</a></li>
                        <li><a href="landing-conference.html" class="dropdown-item">Conference</a></li>
                        <li><a href="landing-digital-agency.html" class="dropdown-item">Digital Agency</a></li>
                        <li><a href="landing-blog.html" class="dropdown-item">Blog Homepage</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                <div class="dropdown-menu">
                  <div class="d-lg-flex pt-lg-3">
                    <div class="mega-dropdown-column">
                      <h6 class="px-3 mb-2">About</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="about-v1.html" class="dropdown-item py-1">About v.1</a></li>
                        <li><a href="about-v2.html" class="dropdown-item py-1">About v.2</a></li>
                      </ul>
                      <h6 class="px-3 mb-2">Blog</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="blog-list-with-sidebar.html" class="dropdown-item py-1">List View with Sidebar</a>
                        </li>
                        <li><a href="blog-grid-with-sidebar.html" class="dropdown-item py-1">Grid View with Sidebar</a>
                        </li>
                        <li><a href="blog-list-no-sidebar.html" class="dropdown-item py-1">List View no Sidebar</a></li>
                        <li><a href="blog-grid-no-sidebar.html" class="dropdown-item py-1">Grid View no Sidebar</a></li>
                        <li><a href="blog-simple-feed.html" class="dropdown-item py-1">Simple Feed</a></li>
                        <li><a href="blog-single.html" class="dropdown-item py-1">Single Post</a></li>
                        <li><a href="blog-podcast.html" class="dropdown-item py-1">Podcast</a></li>
                      </ul>
                    </div>
                    <div class="mega-dropdown-column">
                      <h6 class="px-3 mb-2">Portfolio</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="portfolio-grid.html" class="dropdown-item py-1">Grid View</a></li>
                        <li><a href="portfolio-list.html" class="dropdown-item py-1">List View</a></li>
                        <li><a href="portfolio-slider.html" class="dropdown-item py-1">Slider View</a></li>
                        <li><a href="portfolio-courses.html" class="dropdown-item py-1">Courses</a></li>
                        <li><a href="portfolio-single-project.html" class="dropdown-item py-1">Single Project</a></li>
                        <li><a href="portfolio-single-course.html" class="dropdown-item py-1">Single Course</a></li>
                      </ul>
                      <h6 class="px-3 mb-2">Services</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="services-v1.html" class="dropdown-item py-1">Services v.1</a></li>
                        <li><a href="services-v2.html" class="dropdown-item py-1">Services v.2</a></li>
                        <li><a href="services-single-v1.html" class="dropdown-item py-1">Service Details v.1</a></li>
                        <li><a href="services-single-v2.html" class="dropdown-item py-1">Service Details v.2</a></li>
                      </ul>
                    </div>
                    <div class="mega-dropdown-column">
                      <h6 class="px-3 mb-2">Pricing</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="pricing.html" class="dropdown-item py-1">Pricing Page</a></li>
                      </ul>
                      <h6 class="px-3 mb-2">Contacts</h6>
                      <ul class="list-unstyled mb-3">
                        <li><a href="contacts-v1.html" class="dropdown-item py-1">Contacts v.1</a></li>
                        <li><a href="contacts-v2.html" class="dropdown-item py-1">Contacts v.2</a></li>
                        <li><a href="contacts-v3.html" class="dropdown-item py-1">Contacts v.3</a></li>
                      </ul>
                      <h6 class="px-3 mb-2">Specialty</h6>
                      <ul class="list-unstyled">
                        <li><a href="404-v1.html" class="dropdown-item py-1">404 Error v.1</a></li>
                        <li><a href="404-v2.html" class="dropdown-item py-1">404 Error v.2</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown"
                  aria-current="page">Account</a>
                <ul class="dropdown-menu">
                  <li><a href="account-details.html" class="dropdown-item">Account Details</a></li>
                  <li><a href="account-security.html" class="dropdown-item">Security</a></li>
                  <li><a href="account-notifications.html" class="dropdown-item">Notifications</a></li>
                  <li><a href="account-messages.html" class="dropdown-item">Messages</a></li>
                  <li><a href="account-saved-items.html" class="dropdown-item">Saved Items</a></li>
                  <li><a href="account-collections.html" class="dropdown-item">My Collections</a></li>
                  <li><a href="account-payment.html" class="dropdown-item">Payment Details</a></li>
                  <li><a href="account-signin.html" class="dropdown-item">Sign In</a></li>
                  <li><a href="account-signup.html" class="dropdown-item">Sign Up</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a href="components/typography.html" class="nav-link">UI Kit</a>
              </li>-->
              <li class="nav-item">
                <a href="/account-details.php" class="nav-link">Loads Overwiew</a>
              </li> 
              <li class="nav-item">
                <a href="/account-route.php" class="nav-link">New route</a>
              </li>
              <!-- <li class="nav-item">
                <a href="/account-signin.php" class="nav-link">Sign out</a>
              </li>   -->
            </ul>
          </div>
    
        </div>

        <div class="d-none d-md-flex align-items-center order-lg-2 ms-auto">
          <a href="/account-details.php" class="nav-link px-2" >
            <i class="bx bx-search fs-4 mx-1"></i>
          </a>
          <a href="backend/account-signout.php" class="nav-link d-none d-lg-block">
            <i class="bx bx-log-out  fs-4 mx-1"></i>
          </a>
  
        </div>
        <div class="d-none d-md-block form-check form-switch mode-switch pe-lg-1 ms-auto" data-bs-toggle="mode">
          <input type="checkbox" class="form-check-input" id="theme-mode">
          <!-- <label class="form-check-label d-none d-sm-block" for="theme-mode">Mode</label>
          <label class="form-check-label d-none d-sm-block" for="theme-mode"></label>  -->
        </div>
        <button type="button" class="navbar-toggler" data-bs-toggle="offcanvas" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <!-- <a href="https://themes.getbootstrap.com/product/silicon-business-technology-template-ui-kit/"
          class="btn btn-primary btn-sm fs-sm rounded d-none d-lg-inline-flex" target="_blank" rel="noopener">
          <i class="bx bx-cart fs-5 lh-1 me-1"></i>
          &nbsp;Buy now
        </a> -->
      </div>
    </header>



--FILE account-route.php
<?php
//You should probably improve that
include 'backend/account-details.php';  // Include the backend file to get the driver's data
// $combinedData = getCombinedDriverData();

// if (empty($driversData)) {
//   echo "No driver data found.";
//   exit;
// }


?>

<?php
$pageTitle = "Folotruck | Account - Details";
include('template-parts/header/head-logged.php');
?>

<style>
  .map-tab[aria-expanded="false"] .tab__symbol--show {
    display: block;
  }

  .map-tab[aria-expanded="true"] .tab__symbol--show {
    display: none;

  }

  .map-tab[aria-expanded="false"] .tab__symbol--collapse {
    display: none;
  }

  .map-tab[aria-expanded="true"] .tab__symbol--collapse {
    display: block;

  }


  .form__input-autocomplete--map{
    font-size: 16px;
  }

  .pac-logo::after {
      border-top: 1px solid #f1f1f1;
  }

  .pac-item {
      font-size:16px; 
  }

  .pac-container.pac-logo {
      
      font-size:16px;
      font-family:"Manrope", Arial, sans-serif;
  }
  .pac-item-query{
    font-size: 16px;
  }


</style>
<!-- Body -->

<body>

  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>


  <!-- Page wrapper for sticky footer -->
  <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
  <main class="page-wrapper">


    <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->


    <?php include './account-header.php'; ?>



    <!-- Page content -->
    <section class="container pt-5">
      <div class="row">


        <!-- Sidebar (User info + Account menu) -->
        <?php include './account-aside.php'; ?>



        <!-- Account details -->
        <div class="col-md-8 offset-lg-1 pb-5 mb-2 mb-lg-4 pt-md-5 mt-n3 mt-md-0">
          <div class="ps-md-3 ps-lg-0 mt-md-2 pt-md-4 pb-md-2">
            <h1 class="h2 pt-xl-1 pb-3">New route</h1>

            <!-- Password -->
            <h2 class="h5 text-primary mb-4">Basic information</h2>
            <form class="needs-validation border-bottom pb-3 pb-lg-4" action="backend/account-route.php" method="post">
              <div class="row">
                <!-- <div class="col-sm-6 mb-4">
                  <label for="cp" class="form-label fs-base">Truck number plates</label>

                  <input name="name" id="cp" class="form-control form-control-lg" value="" required="">




                </div>
              </div> -->

                <div class="row">
                  <div class="col-sm-6 mb-4">
                    <label for="np" class="form-label fs-base">Truck plates</label>

                    <input oninput="transformInput()" type="text" id="np" name="phoneNumber" class="form-control form-control-lg" required="">



                  </div>
                  <!-- <div class="col-sm-6 mb-4">
                  <label for="cp" class="form-label fs-base">Set the Pin optional</label>

                  <input id="cp"  name="password" class="form-control form-control-lg" value="" >


                </div> -->

                </div>
                <div class="px-3 row mb-4 mt-2">
                  <hr>
                </div>


                <div class="row pb-2">
                  <div class="col-sm-6">
                    <label for="originInput" class="form-label fs-base">Origin</label>
                    <div class="password-toggle">
                   
                      <!-- <input type="text" name="startDestination"  class="form__input-autocomplete--map form-control form-control-lg" required=""> -->
  <input class="form__input-autocomplete--map form-control form-control-lg" type="text" placeholder="Enter a location" id="autocompleteInput" style="width:400px;padding:10px ">
                      <!-- <input class="form__input-autocomplete--map form-control form-control-lg" type="text" placeholder="Enter a location" style="width:400px; height:40px"> -->
                      <!-- Additional Fields and Map Toggle for Origin -->

                      <div class="password-toggle-btn map-tab" data-bs-toggle="collapse" data-bs-target="#collapse-originMap" aria-expanded="false" aria-controls="collapse-originMap">
                        <i class="text-primary bx bx-chevron-down tab__symbol--show"></i>
                        <i class="text-primary bx bx-chevron-up tab__symbol--collapse"></i>
                      </div>
                    </div>
                  </div>

                  <div class="col-sm-6">
                    <label for="cnp" class="form-label fs-base">Add a Stop</label>
                    <div class="password-toggle">
                      <input type="text" id="cnpFinal" class="form-control form-control-lg">
                      <div id="addStopBtn" class="password-toggle-btn" aria-label="Add Stop">
                        <i class="text-primary bx bx-plus"></i>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row collapse" id="collapse-originMap">
                  <div class="col-sm-6 ">
                    <div id="map-origin" class="map-container mt-2 mb-4" style="height: 400px;"></div>
                  </div>
                  <div class="col-sm-6 ">
                    <label for="originPlaceName" class="form-label fs-base">Name of the Place</label>
                    <input type="text" id="originPlaceName" class="form-control form-control-lg">
                    <label for="originDesiredName" class="form-label fs-base">Desired Name</label>
                    <input type="text" id="originDesiredName" class="form-control form-control-lg">
                    <label for="originLatidude"  class="form-label fs-base">Latitude</label>
                    <input type="text" id="originLatidude" class="form-control form-control-lg">
                    <label for="originLongitude" class="form-label fs-base">Longitude</label>
                    <input type="text" id="originLongitude" class="form-control form-control-lg">
                    <label for="originInput" class="form-label fs-base">Coordinates</label>
                    <input type="text" id="originInput" class="form-control form-control-lg" disabled>

                  </div>
                </div>
                <div class="stops">

                </div>


                <div class="row">
                  <div class="col-12">
                    <hr class="my-2 color-grey">
                  </div>
                </div>

                <div class="row pb-2">
                  <!-- Destination Input and Toggle Button -->
                  <div class="col-sm-6">
                    <label for="destinationInput" class="form-label fs-base">Destination</label>
                    <div class="password-toggle">
                      
                      <input type="text" name="endDestination" class="form-control form-control-lg" required="">
                      <div class="password-toggle-btn map-tab" data-bs-toggle="collapse" data-bs-target="#collapse-destinationMap" aria-expanded="false" aria-controls="collapse-destinationMap">
                        <i class="text-primary bx bx-chevron-down tab__symbol--show"></i>
                        <i class="text-primary bx bx-chevron-up tab__symbol--collapse"></i>
                      </div>
                    </div>
                  </div>

                  <!-- Add a Stop Button (Remains the Same) -->
                  <div class="col-sm-6">
                    <label for="cnp" class="form-label fs-base">Add a Stop</label>
                    <div class="password-toggle">
                      <input type="text" id="cnpFinal" class="form-control form-control-lg">
                      <div id="addFinalStopBtn" class="password-toggle-btn" aria-label="Add Stop">
                        <i class="text-primary bx bx-plus"></i>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Collapsible Destination Map and Additional Fields -->
                <div class="row collapse" id="collapse-destinationMap">
                  <div class="col-sm-6">
                    <div id="map-destination" class="map-container mt-2 mb-4" style="height: 400px;"></div>
                  </div>
                  <div class="col-sm-6">
                    <label for="destinationPlaceName" class="form-label fs-base">Name of the Place</label>
                    <input type="text" id="destinationPlaceName" class="form-control form-control-lg">
                    <label for="destinationDesiredName" class="form-label fs-base">Desired Name</label>
                    <input type="text" id="destinationDesiredName" class="form-control form-control-lg">
                    <label for="destinationLatitude" class="form-label fs-base">Latitude</label>
                    <input type="text" id="destinationLatitude" class="form-control form-control-lg">
                    <label for="destinationLongitude" class="form-label fs-base">Longitude</label>
                    <input type="text" id="destinationLongitude" class="form-control form-control-lg">
                    <label for="destinationInput" class=" form-label fs-base" disabled>Coordinates</label>
                    <input type="text" id="destinationInput" disabled class="form-control form-control-lg">
                  </div>
                </div>


                <div class="finalStops">
                </div>



                <div class="px-3 row mb-4 mt-4">
                  <hr>
                </div>
                <div class="row pb-2">
                  <div class="col-sm-6 mb-4">
                    <label for="np" class="form-label fs-base">Client email</label>
                    <div class="password-toggle">
                      <input type="text" id="np" class="form-control form-control-lg">

                      <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>

                    </div>
                  </div>
                  <div class="col-sm-6 mb-4">
                    <label for="cnp" class="form-label fs-base">Client phone (+country prefix ex: 0034)</label>

                    <input type="text" id="phone" class="form-control form-control-lg">


                  </div>
                </div>
                <div class="d-flex mb-3">
                  <a href="/account-details.html" type="reset" class="btn btn-secondary me-3">Cancel</a>
                  <button type="submit" class="btn btn-primary" type="submit">Create a route</button>
                </div>
            </form>

            <!-- Sessions -->
            <h2 class="h5 text-primary pt-1 pt-lg-3 mt-4">Information</h2>
            <p class="pb-3 mb-3">The info for the driver will be automatically sent after the creation of the route.</p>

          </div>
        </div>
      </div>
    </section>

  

  </main>



  <?php
  include('template-parts//footer/footer.php');
  ?>











  <!-- Back to top button -->
  <a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
  </a>






    <!-- <div id="latBox">Latitude: </div>
    <div id="lngBox">Longitude: </div> -->

    <script>
        // var autocomplete;

        // function initAutocomplete() {
        //     autocomplete = new google.maps.places.Autocomplete(
        //         document.getElementById('autocompleteInput'),
        //         { types: ['geocode'] }
        //     );

        //     autocomplete.addListener('place_changed', onPlaceChanged);
        // }

        // function onPlaceChanged() {
        //   //debugger
        //     var place = autocomplete.getPlace();
        //     if (!place.geometry) {
        //         // User entered the name of a Place that was not suggested and pressed the Enter key, or the Place Details request failed.
        //         window.alert("No details available for input: '" + place.name + "'");
        //         return;
        //     }

        //     // Display the latitude and longitude
        //     document.getElementById('latBox').textContent = 'Latitude: ' + place.geometry.location.lat();
        //     document.getElementById('lngBox').textContent = 'Longitude: ' + place.geometry.location.lng();
        // }
    </script>
  <script src="scripts/account-route.js"></script>
  <script>
      function mainCallback() {
        initAutocomplete();
        googleMapsCallback();
        // Add any other functions you want to call after the Maps API loads
    }
  </script>

  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVAu56etJjhaNzoTDXGvkCGgoNY0icts&libraries=places&callback=mainCallback"></script>
  <!-- <script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVAu56etJjhaNzoTDXGvkCGgoNY0icts&libraries=places&callback=initAutocomplete" ></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVAu56etJjhaNzoTDXGvkCGgoNY0icts&callback=googleMapsCallback"></script>  -->

  <script type="text/javascript">
    function transformInput() {
      var input = document.getElementById('np');
      input.value = input.value.replace(/\s+/g, '').toUpperCase();
    }
  </script>


  <!-- Vendor Scripts -->
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script src="assets/vendor/cleave.js/dist/cleave.min.js"></script>

  <!-- Main Theme Script -->
  <script src="assets/js/theme.min.js"></script>
</body>

</html>

--FILE account-security.php
<?php
//You should probably improve that
include 'backend/account-details.php';  // Include the backend file to get the driver's data
// $combinedData = getCombinedDriverData();
// if (empty($driversData)) {
//   echo "No driver data found.";
//   exit;
// }
?>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Silicon | Account - Details</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Silicon - Multipurpose Technology Bootstrap Template">
  <meta name="keywords" content="bootstrap, business, creative agency, mobile app showcase, saas, fintech, finance, online courses, software, medical, conference landing, services, e-commerce, shopping cart, multipurpose, shop, ui kit, marketing, seo, landing, blog, portfolio, html5, css3, javascript, gallery, slider, touch, creative">
  <meta name="author" content="U24web">

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon and Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Vendor Styles -->
  <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/css/boxicons.min.css" />

  <!-- Main Theme Styles + Bootstrap -->
  <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

  <!-- Page loading styles -->
  <style>
    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    .dark-mode .page-loading {
      background-color: #0b0f19;
    }

    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }

    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .page-loading.active>.page-loading-inner {
      opacity: 1;
    }

    .page-loading-inner>span {
      display: block;
      font-size: 1rem;
      font-weight: normal;
      color: #9397ad;
    }

    .dark-mode .page-loading-inner>span {
      color: #fff;
      opacity: .6;
    }

    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      border: .15em solid #b4b7c9;
      border-right-color: transparent;
      border-radius: 50%;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }

    .dark-mode .page-spinner {
      border-color: rgba(255, 255, 255, .4);
      border-right-color: transparent;
    }

    @-webkit-keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    @keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- Theme mode -->
  <script>
    let mode = window.localStorage.getItem('mode'),
      root = document.getElementsByTagName('html')[0];
    if (mode !== null && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }
  </script>

  <!-- Page loading scripts -->
  <script>
    (function() {
      window.onload = function() {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function() {
          preloader.remove();
        }, 1000);
      };
    })();
  </script>
</head>


<!-- Body -->

<body>

  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>


  <!-- Page wrapper for sticky footer -->
  <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
  <main class="page-wrapper">


    <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->


    <?php include './account-header.php'; ?>



    <!-- Page content -->
    <section class="container pt-5">
      <div class="row">


        <!-- Sidebar (User info + Account menu) -->
        <?php include './account-aside.php'; ?>



        <div class="col-md-8 offset-lg-1 pb-5 mb-lg-2 mb-lg-4 pt-md-5 mt-n3 mt-md-0">
          <div class="ps-md-3 ps-lg-0 mt-md-2 pt-md-4 pb-md-2">
            <h1 class="h2 pt-xl-1 pb-3">Security</h1>

            <!-- Password -->
            <h2 class="h5 text-primary mb-4">Current email</h2>
            <form class="needs-validation border-bottom pb-3 pb-lg-4" novalidate="" action="backend/account-change-profile.php" method="post" id="emailForm">
              <input type="hidden" name="formType" value="email">
              <div class="row pb-2">
                <div class="col-sm-6 mb-4">
                  <label for="newEmail" class="form-label fs-base">New email</label>
                  <input type="text" id="newEmail" name="newEmail" class="form-control form-control-lg" required="">
                </div>
                <div class="col-sm-6 mb-4">
                  <label for="confirmNewEmail" class="form-label fs-base">Confirm new email</label>
                  <input type="text" id="confirmNewEmail" name="confirmNewEmail" class="form-control form-control-lg" required="">
                  <div class="invalid-tooltip position-absolute top-100 start-0">Email does not match!</div>
                </div>
              </div>
              <div class="d-flex mb-3">
                <button type="reset" class="btn btn-secondary me-3">Cancel</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </form>


            <!-- Password -->
            <h2 class="h5 text-primary mb-4  pt-1 pt-lg-3 mt-4">Username</h2>
            <form class="needs-validation border-bottom pb-3 pb-lg-4" novalidate="" action="backend/account-change-profile.php" method="post" id="usernameForm">
              <input type="hidden" name="formType" value="username">
              <div class="row pb-2">
                <div class="col-sm-6 mb-4">
                  <label for="np" class="form-label fs-base">New username</label>
                  <div class="password-toggle">
                    <input name="newUsername" type="text" id="np" class="form-control form-control-lg" required="">


                  </div>
                </div>
                <div class="col-sm-6 mb-4">
                  <label for="cnp" class="form-label fs-base">Confirm new username</label>
                  <div class="password-toggle">
                    <input name="checkUsername" type="text" id="cnp" class="form-control form-control-lg" required="">

                    <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3">
                <button type="reset" class="btn btn-secondary me-3">Cancel</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </form>

            <h2 class="h5 text-primary mb-4  pt-1 pt-lg-3 mt-4">Password</h2>
            <form class="needs-validation border-bottom pb-3 pb-lg-4" novalidate="" action="backend/account-change-profile.php" method="post" id="passwordForm">
              <input type="hidden" name="formType" value="password">
              <div class="row">
                <div class="col-sm-6 mb-4">
                  <label for="cp" class="form-label fs-base">Current password</label>
                  <div class="password-toggle">
                    <input type="password" id="cp" class="form-control form-control-lg" value="jonnyPass" required="">
                    <label class="password-toggle-btn" aria-label="Show/hide password">
                      <input class="password-toggle-check" type="checkbox">
                      <span class="password-toggle-indicator"></span>
                    </label>
                    <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>
                  </div>
                </div>
              </div>
              <div class="row pb-2">
                <div class="col-sm-6 mb-4">
                  <label for="np" class="form-label fs-base">New password</label>
                  <div class="password-toggle">
                    <input type="password" id="np" class="form-control form-control-lg" required="">
                    <label class="password-toggle-btn" aria-label="Show/hide password">
                      <input class="password-toggle-check" type="checkbox">
                      <span class="password-toggle-indicator"></span>
                    </label>
                    <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>
                  </div>
                </div>
                <div class="col-sm-6 mb-4">
                  <label for="cnp" class="form-label fs-base">Confirm new password</label>
                  <div class="password-toggle">
                    <input type="password" id="cnp" class="form-control form-control-lg" required="">
                    <label class="password-toggle-btn" aria-label="Show/hide password">
                      <input class="password-toggle-check" type="checkbox">
                      <span class="password-toggle-indicator"></span>
                    </label>
                    <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3">
                <button type="reset" class="btn btn-secondary me-3">Cancel</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
              </div>
            </form>

            <!-- Sessions -->
            <!-- <h2 class="h5 text-primary pt-1 pt-lg-3 mt-4">Your sessions</h2>
            <p class="pb-3 mb-3">This is a list of new devices that have logged into your account. Remove any sessions that you do not recognize.</p>
            <ul class="list-unstyled mb-0 d-none">
              <li class="d-flex align-items-center justify-content-between mb-4">
                <div class="d-flex align-items-start me-3">
                  <div class="bg-secondary rounded-1 p-2">
                    <i class="bx bx-desktop fs-xl text-primary d-block"></i>
                  </div>
                  <div class="ps-3">
                    <div class="fw-medium text-nav mb-1">Mac – New York, USA</div>
                    <span class="d-inline-block fs-sm text-muted border-end pe-2 me-2">Chrome</span>
                    <span class="badge bg-success shadow-success">Active now</span>
                  </div>
                </div>
                <button type="button" class="btn btn-outline-secondary px-3 px-sm-4">
                  <i class="bx bx-x fs-xl ms-sm-n1 me-sm-1"></i>
                  <span class="d-none d-sm-inline">Remove</span>
                </button>
              </li>
              <li class="d-flex align-items-center justify-content-between mb-4">
                <div class="d-flex align-items-start me-3">
                  <div class="bg-secondary rounded-1 p-2">
                    <i class="bx bx-mobile fs-xl text-primary d-block"></i>
                  </div>
                  <div class="ps-3">
                    <div class="fw-medium text-nav mb-1">Iphone 12 – New York, USA</div>
                    <span class="d-inline-block fs-sm text-muted border-end pe-2 me-2">Silicon App</span>
                    <span class="d-inline-block fs-sm text-muted">20 hours ago</span>
                  </div>
                </div>
                <button type="button" class="btn btn-outline-secondary px-3 px-sm-4">
                  <i class="bx bx-x fs-xl ms-sm-n1 me-sm-1"></i>
                  <span class="d-none d-sm-inline">Remove</span>
                </button>
              </li>
              <li class="d-flex align-items-center justify-content-between mb-4">
                <div class="d-flex align-items-start me-3">
                  <div class="bg-secondary rounded-1 p-2">
                    <i class="bx bx-desktop fs-xl text-primary d-block"></i>
                  </div>
                  <div class="ps-3">
                    <div class="fw-medium text-nav mb-1">Windows 10.1 – New York, USA</div>
                    <span class="d-inline-block fs-sm text-muted border-end pe-2 me-2">Chrome</span>
                    <span class="d-inline-block fs-sm text-muted">November 15 at 8:42 am</span>
                  </div>
                </div>
                <button type="button" class="btn btn-outline-secondary px-3 px-sm-4">
                  <i class="bx bx-x fs-xl ms-sm-n1 me-sm-1"></i>
                  <span class="d-none d-sm-inline">Remove</span>
                </button>
              </li>
            </ul> -->
          </div>
        </div>
    </section>
  </main>


  <!-- Footer -->
  <footer class="footer dark-mode bg-dark border-top border-light pt-5 pb-4 pb-lg-5">
    <div class="container pt-lg-4">
      <div class="row pb-5">
        <div class="col-lg-4 col-md-6">
          <div class="navbar-brand text-dark p-0 me-0 mb-3 mb-lg-4">
            <img class="logo" src="assets/img/logo-white-text.png" width="140" alt="Silicon">
            <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

          </div>
          <p class="fs-sm text-light opacity-70 pb-lg-3 mb-4">Proin ipsum pharetra, senectus eget scelerisque varius
            pretium platea velit. Lacus, eget eu vitae nullam proin turpis etiam mi sit. Non feugiat feugiat egestas
            nulla nec. Arcu tempus, eget elementum dolor ullamcorper sodales ultrices eros.</p>
          <form class="needs-validation" novalidate>
            <label for="subscr-email" class="form-label">Subscribe to our newsletter</label>
            <div class="input-group">
              <input type="email" id="subscr-email" class="form-control rounded-start ps-5" placeholder="Your email" required>
              <i class="bx bx-envelope fs-lg text-muted position-absolute top-50 start-0 translate-middle-y ms-3 zindex-5"></i>
              <div class="invalid-tooltip position-absolute top-100 start-0">Please provide a valid email address.</div>
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </div>
          </form>
        </div>
        <div class="col-xl-6 col-lg-7 col-md-5 offset-xl-2 offset-md-1 pt-4 pt-md-1 pt-lg-0">
          <div id="footer-links" class="row">
            <div class="col-lg-4">
              <h6 class="mb-2">
                <a href="#useful-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Useful Links</a>
              </h6>
              <div id="useful-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column pb-lg-1 mb-lg-3">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Home</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">About</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Services</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Our Clients</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">News</a></li>
                </ul>
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Terms &amp;
                      Conditions</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Privacy Policy</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-3">
              <h6 class="mb-2">
                <a href="#social-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Socials</a>
              </h6>
              <div id="social-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Facebook</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">LinkedIn</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Twitter</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Instagram</a></li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-5 pt-2 pt-lg-0">
              <h6 class="mb-2">Contact Us</h6>
              <a href="mailto:email@u24web.com" class="fw-medium">email@u24web.com</a>
            </div>
          </div>
        </div>
      </div>
      <p class="nav d-block fs-xs text-center text-md-start pb-2 pb-lg-0 mb-0">
        <span class="text-light opacity-50">&copy; All rights reserved. Made by </span>
        <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
      </p>
    </div>
  </footer>


  <!-- Back to top button -->
  <a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
  </a>


  <!-- Vendor Scripts -->
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script src="assets/vendor/cleave.js/dist/cleave.min.js"></script>

  <!-- Main Theme Script -->
  <script src="assets/js/theme.min.js"></script>
</body>

</html>

--FILE account-signin.php
<?php include('template-parts\head.php');?>
  <!-- Body -->
  <body>

    <!-- Page loading spinner -->
    <div class="page-loading active">
      <div class="page-loading-inner">
        <div class="page-spinner"></div><span>Loading...</span>
      </div>
    </div>


    <!-- Page wrapper for sticky footer -->
    <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
    <main class="page-wrapper">


      <!-- Navbar -->
      <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->
      <?php include('template-parts\menu-login.php');?>


      <!-- Page content -->
      <section class="position-relative h-100 pt-5 pb-4">

        <!-- Sign in form -->
        <div class="container d-flex flex-wrap justify-content-center justify-content-xl-start h-100 pt-5">
          <div class="w-100 align-self-end pt-1 pt-md-4 pb-4" style="max-width: 526px;">
            <h1 class="text-center text-xl-start">Welcome</h1>
            <p class="text-center text-xl-start pb-3 mb-3">Don’t have an account yet? <a href="account-signup.php">Register here.</a></p>
            <form class="needs-validation mb-2"  action="backend/account-signin.php" method="post">
              <div class="position-relative mb-4">
                <label for="email" class="form-label fs-base">Login</label>
                <input type="text" name="username" id="email" class="form-control form-control-lg" required>
                <div class="invalid-feedback position-absolute start-0 top-100">Please enter a valid username!</div>
              </div>
              <div class="mb-4">
                <label for="password" class="form-label fs-base">Password</label>
                <div class="password-toggle">
                  <input name="password" type="password" id="password" class="form-control form-control-lg" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"></span>
                  </label>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter your password!</div>
                </div>
              </div>
              <div class="mb-4">
                <div class="form-check">
                  <input type="checkbox" id="remember" class="form-check-input">
                  <label for="remember" class="form-check-label fs-base">Remember me</label>
                </div>
              </div>
              <button type="submit" class="btn btn-primary shadow-primary btn-lg w-100">Sign in</button>
            </form>
            <a href="#" class="btn btn-link btn-lg w-100">Forgot your password?</a>
            <hr class="my-4">
            <h6 class="text-center mb-4">Or sign in with your social network</h6>
            <div class="row row-cols-1 row-cols-sm-2">
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-google btn-lg w-100">
                  <i class="bx bxl-google fs-xl me-2"></i>
                  Google
                </a>
              </div>
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-facebook btn-lg w-100">
                  <i class="bx bxl-facebook fs-xl me-2"></i>
                  Facebook
                </a>
              </div>
            </div>
          </div>
          <div class="w-100 align-self-end">
            <p class="nav d-block fs-xs text-center text-xl-start pb-2 mb-0">
              &copy; All rights reserved. Made by 
              <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
            </p>    
          </div>
        </div>
        
        <!-- Background -->
        <div class="position-absolute top-0 end-0 w-50 h-100 bg-position-center bg-repeat-0 bg-size-cover d-none d-xl-block" style="background-image: url(assets/img/account/signin-bg.jpg);"></div>
      </section>
    </main>


    <!-- Back to top button -->
    <a href="#top" class="btn-scroll-top" data-scroll>
      <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
      <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
    </a>


    <!-- Vendor Scripts -->
    <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

    <!-- Main Theme Script -->
    <script src="assets/js/theme.min.js"></script>
  </body>
</html>

--FILE account-signup.php
<?php include('template-parts\head.php');?>

<!-- Body -->

<body>

  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>


  <!-- Page wrapper for sticky footer -->
  <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
  <main class="page-wrapper">


    <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->
    <header class="header navbar navbar-expand-lg position-absolute navbar-sticky">
      <div class="container px-3">
        <a href="index.html" class="navbar-brand ">

          <img class="logo" src="assets/img/logo.svg" width="140" alt="Silicon">
          <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

        </a>
        <div id="navbarNav" class="offcanvas offcanvas-end">
          <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
          <ul class="navbar-nav me-3 mb-2 mb-lg-0  justify-content-md-end dark-mode">
                  <li class="nav-item">
                      <a href="/" class="nav-link">Login</a>
                    </li> 
                    <li class="nav-item">
                      <a href="/account-signup.php" class="nav-link">Sign up</a>
                    </li>
              </ul>
          </div>
        </div>



        <!-- <div class="d-none d-md-flex align-items-center order-lg-2 ms-auto">
          <a href="#searchCollapse" class="nav-link px-2" data-bs-toggle="collapse">
            <i class="bx bx-search text-light fs-4 mx-1"></i>
          </a>
          <a href="#" class="nav-link d-none d-lg-block">
            <i class="bx bx-user text-light fs-4 mx-1"></i>
          </a>

        </div> -->
        <div class="d-block d-md-block form-check form-switch mode-switch pe-lg-1 ms-auto" data-bs-toggle="mode">
          <input type="checkbox" class="form-check-input" id="theme-mode">
          <!-- <label class="form-check-label d-none d-sm-block" for="theme-mode">Mode</label>
          <label class="form-check-label d-none d-sm-block" for="theme-mode"></label>  -->
        </div>


        <button type="button" class="navbar-toggler me-4 me-md-0" data-bs-toggle="offcanvas" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
     
      </div>
    </header>

    <section class="position-relative h-100 pt-5 pb-4">

      <!-- Sign up form -->
      <div class="container d-flex flex-wrap justify-content-center justify-content-xl-start h-100 pt-5">
        <div class="w-100 align-self-end pt-1 pt-md-4 pb-4" style="max-width: 526px;">
          <h1 class="text-center text-xl-start">Create Account</h1>
          <p class="text-center text-xl-start pb-3 mb-3">Already have an account? <a href="account-signin.php">Sign in here.</a></p>
          <form class="needs-validation" action="backend/account-signup.php" method="post">


            <div class="row">


              <div class="col-sm-6">
                <div class="position-relative mb-4">
                  <label for="username" class="form-label fs-base">User name</label>
                  <input type="text" id="username" name="username" class="form-control form-control-lg" required>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter your name!</div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="position-relative mb-4">
                  <label for="email" class="form-label fs-base">Email</label>
                  <input type="email" id="email" name="email" class="form-control form-control-lg" required>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter a valid email address!</div>
                </div>
              </div>
              <div class="col-12 mb-4">
                <label for="password" class="form-label fs-base">Password</label>
                <div class="password-toggle">
                  <input type="password" id="password" name="password" class="form-control form-control-lg" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"></span>
                  </label>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter a password!</div>
                </div>
              </div>
              <div class="col-12 mb-4">
                <label for="password-confirm" class="form-label fs-base">Confirm password</label>
                <div class="password-toggle">
                  <input type="password" id="password-confirm" name="password_confirm" class="form-control form-control-lg" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"></span>
                  </label>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter a password!</div>
                </div>
              </div>
            </div>
            <div class="mb-4">
              <div class="form-check">
                <input type="checkbox" id="terms" class="form-check-input">
                <label for="terms" class="form-check-label fs-base">I agree to <a href="#">Terms &amp; Conditions</a></label>
              </div>
            </div>
            <button type="submit" class="btn btn-primary shadow-primary btn-lg w-100">Sign up</button>
          </form>
          <hr class="my-4">
          <h6 class="text-center mb-4">Or sign up with your social network</h6>
          <div class="row row-cols-1 row-cols-sm-2">
            <div class="col mb-3">
              <a href="#" class="btn btn-icon btn-secondary btn-google btn-lg w-100">
                <i class="bx bxl-google fs-xl me-2"></i>
                Google
              </a>
            </div>
            <div class="col mb-3">
              <a href="#" class="btn btn-icon btn-secondary btn-facebook btn-lg w-100">
                <i class="bx bxl-facebook fs-xl me-2"></i>
                Facebook
              </a>
            </div>
          </div>
        </div>
        <div class="w-100 align-self-end">
          <p class="nav d-block fs-xs text-center text-xl-start pb-2 mb-0">
            &copy; All rights reserved. Made by
            <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
          </p>
        </div>
      </div>

      <!-- Background -->
      <div class="position-absolute top-0 end-0 w-50 h-100 bg-position-center bg-repeat-0 bg-size-cover d-none d-xl-block" style="background-image: url(assets/img/account/signin-bg.jpg);"></div>
    </section>
  </main>


  <!-- Back to top button -->
  <a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
  </a>


  <!-- Vendor Scripts -->
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

  <!-- Main Theme Script -->
  <script src="assets/js/theme.min.js"></script>
</body>

</html>

--FILE account-test-connection.php
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

<?php

function checkDatabaseConnection() {
    // Database credentials
    define('DB_SERVER', 'srv1213.hstgr.io');
    define('DB_USERNAME', 'u428535412_folotruck');
    define('DB_PASSWORD', 'bsKHY2%tX3rPyFm&nV');
    define('DB_DATABASE', 'u428535412_folotruck');

    // Create connection
    $conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    } else {
        echo "Connected successfully. Here is some data: <br>";

        // Sample SQL query to fetch data from your table
        $sql = "SELECT * FROM your_table LIMIT 10";
        $result = $conn->query($sql);

        if ($result->num_rows > 0) {
            // Output data of each row
            while($row = $result->fetch_assoc()) {
                echo "id: " . $row["id"]. " - Name: " . $row["name"]. "<br>";
            }
        } else {
            echo "0 results";
        }
    }
    $conn->close();
}

// Call the function to check the connection and output some data
checkDatabaseConnection();

?>

</body>
</html>

--FILE account-test-display.php
<?php
include_once 'db.php'; // Include your database connection file
session_start(); // Start the session

// Check if the user is not logged in, redirect to the login page
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header('Location: login.php');
    exit;
}

/** @var mysqli $conn */
$conn = checkDatabaseConnection();

$userId = $_SESSION['id']; // Assuming user id is stored in session when logged in

// Fetch and display driver data from the user-specific table
$tableName = "user_" . $userId;
$getDataSql = "SELECT * FROM $tableName";
$dataResult = $conn->query($getDataSql);

if ($dataResult->num_rows > 0) {
    echo "Drivers Data:<br>";

    while ($dataRow = $dataResult->fetch_assoc()) {
        // Display driver data
        echo "Driver ID: " . $dataRow['driver_id'] . "<br>";
        echo "Name: " . $dataRow['name'] . "<br>";
        echo "Start Destination: " . $dataRow['start_destination'] . "<br>";
        echo "End Destination: " . $dataRow['end_destination'] . "<br>";
        echo "----------------------------<br>";
    }
} else {
    echo "No driver data found.";
}

$conn->close();  // Close the connection
?>


--FILE account-test-driver.php
<?php

include_once 'db.php'; 
include_once 'helper.php';  // Include the helper functions file

session_start(); 

if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header('Location: login.php');
    exit;
}

/** @var mysqli $conn */
$conn = checkDatabaseConnection();

// Handle the form submission
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $adminId = $_SESSION['id'];  // Retrieving admin ID from session

    $name = $_POST['name'];
    $phoneNumber = $_POST['phoneNumber'];
    $startDestination = $_POST['startDestination'];
    $endDestination = $_POST['endDestination'];

    // Inserting new driver into the user_id table created for the admin
    $sqlInsertDriver = "INSERT INTO user_$adminId (name, phone_number, start_destination, end_destination) 
                        VALUES ('$name', '$phoneNumber', '$startDestination', '$endDestination')";
    
    $insertResult = executeQuery($conn, $sqlInsertDriver);
    
    if ($insertResult === true) {
        $driverId = $conn->insert_id; // Get the ID of the newly inserted driver

        // Create an external table for the specific driver
        $driverTableName = "driver_" . $adminId. '_'. $driverId . "_data";
        $sqlCreateDriverTable = "CREATE TABLE $driverTableName (
            data_id INT AUTO_INCREMENT PRIMARY KEY,
            data TEXT NOT NULL
        ) ENGINE=InnoDB";

        echo createTable($conn, $sqlCreateDriverTable, $driverTableName);

        // Update the driver's record in the user_id table to store the foreign key
        $sqlUpdateDriver = "UPDATE user_$adminId SET foreign_id = $driverId WHERE driver_id = $driverId";
        $updateResult = executeQuery($conn, $sqlUpdateDriver);

        if ($updateResult !== true) {
            echo $updateResult;
        } else {
            echo "New driver created successfully and foreign key set.";
        }
    } else {
        echo $insertResult;
    }
}

$conn->close();
?>

<!-- HTML form for creating a new driver -->
<form method="post" action="">
    Name: <input type="text" name="name" required><br>
    Phone Number: <input type="text" name="phoneNumber" required><br>
    Start Destination: <input type="text" name="startDestination" required><br>
    End Destination: <input type="text" name="endDestination" required><br>
    <input type="submit" value="Create Driver">
</form>


--FILE account-test-login.php
<?php
include_once 'db.php'; // Include your database connection file


// Process login form submission
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $username = mysqli_real_escape_string($conn, $_POST['username']); // Escape user inputs to prevent SQL injection
    $password = $_POST['password']; // Get the password from POST request

    // Retrieve the user's data from the users table
    $sql = "SELECT * FROM users WHERE username = '$username'";
    $result = $conn->query($sql);

    if ($result->num_rows > 0) {
        // Output data of each row
        $row = $result->fetch_assoc();

        if (password_verify($password, $row['password'])) { // Check if the password matches the hash stored in the database
            session_start();
            $_SESSION['loggedin'] = true;
            $_SESSION['username'] = $username;
            $_SESSION['id'] = $row['id'];  // Storing user ID in the session

            header("Location: account-test-display.php"); 
        } else {
            echo "Invalid password.";
        }
    } else {
        echo "Invalid username.";
    }

    $conn->close();  // Close the connection
}

?>

<!-- Login Form -->
<form method="post">
    Username: <input type="text" name="username" required><br>
    Password: <input type="password" name="password" required><br>
    <input type="submit" value="Login">
</form>

--FILE account-test-registration.php
<?php
include_once 'db.php';
include_once 'helper.php';  // Include the helper functions file

// Process registration form submission
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();

    $username = mysqli_real_escape_string($conn, $_POST['username']);

    // Check if username already exists
    $checkUsernameSql = "SELECT username FROM users WHERE username = '$username'";
    $checkResult = $conn->query($checkUsernameSql);

    if ($checkResult->num_rows > 0) {
        // Username already exists
        echo "Username already taken. Please choose another one.";
    } else {
        $password = password_hash($_POST['password'], PASSWORD_DEFAULT);

        // Insert new user into the users table
        $sql = "INSERT INTO users (username, password) VALUES ('$username', '$password')";

        $executionResult = executeQuery($conn, $sql);

        if ($executionResult === true) {
            $last_id = $conn->insert_id;  // Get the ID of the newly registered user

            // Create a new table for the driver based on their ID
            $tableName = "user_" . $last_id;
            $createTableSql = "CREATE TABLE $tableName (
                driver_id INT AUTO_INCREMENT PRIMARY KEY,
                name VARCHAR(255) NOT NULL,
                phone_number VARCHAR(20) NOT NULL,
                start_destination VARCHAR(255) NOT NULL,
                end_destination VARCHAR(255) NOT NULL,
                foreign_id INT NULL  -- Add the foreign key column but without a constraint for now
            ) ENGINE=InnoDB";

            // Using the createTable helper function
            echo createTable($conn, $createTableSql, $tableName);
        } else {
            echo $executionResult;
        }
    }

    $conn->close(); // Closing the connection
}
?>

<!-- Registration Form -->
<!-- <form method="post">
    Username: <input type="text" name="username" required><br>
    Password: <input type="password" name="password" required><br>
    <input type="submit" value="Register">
</form> -->


--FILE gulpfile.js
'use strict';

const gulp = require('gulp'),
      rollup = require('gulp-rollup'),
      del = require('del'),
      rename = require('gulp-rename'),
      sass = require('gulp-sass')(require('sass')),
      autoprefixer = require('gulp-autoprefixer'),
      sourcemaps = require('gulp-sourcemaps'),
      browserSync = require('browser-sync').create(),
      reload = browserSync.reload,
      babel = require('gulp-babel'),
      uglify = require('gulp-uglify'),
      packageFile = require('./package.json');


// Define reusable paths

const path = {
  scss: 'assets/scss',
  src_js: 'assets/js/src',
  js: 'assets/js',
  css: 'assets/css',
  vendor: 'assets/vendor'
}


// Sass compiling

// Expanded
gulp.task('sass:expanded', () => {
  const options = {
    outputStyle: 'expanded',
    precision: 10 // rounding of css color values, etc..
  };
  const sourceOptions = {
    cwd: path.scss,
    base: path.scss
  };

  return gulp.src(['*.scss', '*/*/*.scss'], sourceOptions)
    .pipe(sass.sync(options).on('error', sass.logError))
    .pipe(autoprefixer({
      cascade: false
    }))
    .pipe(gulp.dest(path.css))
    .pipe(browserSync.stream()); // Inject css into browser
});

// Minified
gulp.task('sass:minified', () => {
  const options = {
    outputStyle: 'compressed',
    precision: 10 // rounding of css color values, etc..
  };
  const sourceOptions = {
    cwd: path.scss,
    base: path.scss
  };
  return gulp.src(['*.scss', '*/*/*.scss'], sourceOptions)
    .pipe(sourcemaps.init())
    .pipe(sass.sync(options).on('error', sass.logError))
    .pipe(autoprefixer({
      cascade: false
    }))
    .pipe(rename({ suffix: '.min'}))
    .pipe(sourcemaps.write('.'))
    .pipe(gulp.dest(path.css))
    .pipe(browserSync.stream()); // Inject css into browser
});


// JS compiling and minification

gulp.task('js', () => {
  return gulp.src(path.src_js + '/theme.js')
    .pipe(rollup({
      allowRealFiles: true,
      input: './' + path.src_js + '/theme.js',
      output: {
        format: 'iife',
        banner: `
        /**
         * Silicon | Multipurpose Bootstrap 5 Template & UI Kit
         * Copyright 2022 U24web
         * Theme core scripts
         *
         * @author U24web
         * @version 1.2.0
         */
        `
      }
    }))
    .pipe(rename('theme.min.js'))
    .pipe(babel({
      presets: [['@babel/env', {modules: false}]],
    }))
    .pipe(uglify({output: {comments: /^!|@author|@version/i}}))
    .pipe(gulp.dest(path.js))
    .on('end', () => {
      reload(); // One time browser reload at end of uglification (minification)
    });
});


// Move vendor css and js files from node_modules to dist folder
// based on the list in package.json dependencies

gulp.task('vendor', () => {
  let dependencies = Object.keys(packageFile.dependencies);
  let libs = dependencies.map((key) => {
    return key + '/**/*';
  });
  return gulp.src(libs, {cwd: 'node_modules', base: './node_modules'})
  .pipe(gulp.dest(path.vendor));
});


// Clean certain files/folders from assets directory. Runs before compilation of new files. See 'default' task at the most bottom of this file

gulp.task('clean', () => {
  return del([
    path.css,
    path.js + '/theme.min.js',
    path.vendor
  ]);
});


// Watcher

gulp.task('watch', () => {
  global.watch = true;

  // BrowserSync
  browserSync.init({
    server: {
      baseDir: './',
    },
    open: true, // or "local"
  });
  gulp.watch(['./*.html', './**/*.html']).on('change', reload);
  gulp.watch(path.scss + '/**/*.scss', gulp.series('sass:minified'));
  gulp.watch(path.src_js + '/**/*.js', gulp.series('js'));
});


// Default task - the dependent tasks will run in parallell / excluding Docs and Components compilation

gulp.task(
  'default',
  gulp.series('clean', 'vendor', gulp.parallel('js', 'sass:minified', 'sass:expanded'), 'watch')
);


--FILE helper.php
<?php

function createTable($conn, $sql, $tableName) {
    if ($conn->query($sql) === TRUE) {
        return "Table '$tableName' created successfully.";
    } else {
        return "Error creating table '$tableName': " . $conn->error;
    }
}

function executeQuery($conn, $sql) {
    if ($conn->query($sql) === TRUE) {
        return true;
    } else {
        return "Error executing query: " . $conn->error;
    }
}

?>

--FILE index-old.php
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Silicon | Account - Sign In</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Silicon - Multipurpose Technology Bootstrap Template">
    <meta name="keywords" content="bootstrap, business, creative agency, mobile app showcase, saas, fintech, finance, online courses, software, medical, conference landing, services, e-commerce, shopping cart, multipurpose, shop, ui kit, marketing, seo, landing, blog, portfolio, html5, css3, javascript, gallery, slider, touch, creative">
    <meta name="author" content="U24web">

    <!-- Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon and Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
    <link rel="shortcut icon" href="assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#080032">
    <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Vendor Styles -->
    <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/css/boxicons.min.css"/>

    <!-- Main Theme Styles + Bootstrap -->
    <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

    <!-- Page loading styles -->
    <style>
      .page-loading {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        -webkit-transition: all .4s .2s ease-in-out;
        transition: all .4s .2s ease-in-out;
        background-color: #fff;
        opacity: 0;
        visibility: hidden;
        z-index: 9999;
      }
      .dark-mode .page-loading {
        background-color: #0b0f19;
      }
      .page-loading.active {
        opacity: 1;
        visibility: visible;
      }
      .page-loading-inner {
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        text-align: center;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        -webkit-transition: opacity .2s ease-in-out;
        transition: opacity .2s ease-in-out;
        opacity: 0;
      }
      .page-loading.active > .page-loading-inner {
        opacity: 1;
      }
      .page-loading-inner > span {
        display: block;
        font-size: 1rem;
        font-weight: normal;
        color: #9397ad;
      }
      .dark-mode .page-loading-inner > span {
        color: #fff;
        opacity: .6;
      }
      .page-spinner {
        display: inline-block;
        width: 2.75rem;
        height: 2.75rem;
        margin-bottom: .75rem;
        vertical-align: text-bottom;
        border: .15em solid #b4b7c9;
        border-right-color: transparent;
        border-radius: 50%;
        -webkit-animation: spinner .75s linear infinite;
        animation: spinner .75s linear infinite;
      }
      .dark-mode .page-spinner {
        border-color: rgba(255,255,255,.4);
        border-right-color: transparent;
      }
      @-webkit-keyframes spinner {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }
      @keyframes spinner {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }
    </style>

    <!-- Theme mode -->
    <script>
      let mode = window.localStorage.getItem('mode'),
          root = document.getElementsByTagName('html')[0];
      if (mode !== null && mode === 'dark') {
        root.classList.add('dark-mode');
      } else {
        root.classList.remove('dark-mode');
      }
    </script>

    <!-- Page loading scripts -->
    <script>
      (function () {
        window.onload = function () {
          const preloader = document.querySelector('.page-loading');
          preloader.classList.remove('active');
          setTimeout(function () {
            preloader.remove();
          }, 1000);
        };
      })();
    </script>
  </head>


  <!-- Body -->
  <body>

    <!-- Page loading spinner -->
    <div class="page-loading active">
      <div class="page-loading-inner">
        <div class="page-spinner"></div><span>Loading...</span>
      </div>
    </div>


    <!-- Page wrapper for sticky footer -->
    <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
    <main class="page-wrapper">


      <!-- Navbar -->
      <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->

      
      <header class="header navbar navbar-expand-lg position-absolute navbar-sticky">
        <div class="container px-3">
        <a href="index.html" class="navbar-brand ">
          
          <img class="logo" src="assets/img/logo.svg" width="140" alt="Silicon">
          <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

        </a>
          <div id="navbarNav" class="offcanvas offcanvas-end">
            <div class="offcanvas-header border-bottom">
              <h5 class="offcanvas-title">Menu</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <!-- <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Landings</a>
                  <div class="dropdown-menu p-0">
                    <div class="d-lg-flex">
                      <div class="mega-dropdown-column bg-position-center bg-repeat-0 bg-size-cover rounded-3 rounded-end-0" style="background-image: url(assets/img/landings.jpg); margin: -1px;"></div>
                      <div class="mega-dropdown-column pt-lg-3 pb-lg-4">
                        <ul class="list-unstyled mb-0">
                          <li><a href="index.html" class="dropdown-item">Template Intro Page</a></li>
                          <li><a href="landing-mobile-app-showcase-v1.html" class="dropdown-item">Mobile App Showcase v.1</a></li>
                          <li><a href="landing-mobile-app-showcase-v2.html" class="dropdown-item">Mobile App Showcase v.2</a></li>
                          <li><a href="landing-saas-v1.html" class="dropdown-item">SaaS v.1</a></li>
                          <li><a href="landing-saas-v2.html" class="dropdown-item">SaaS v.2</a></li>
                          <li><a href="landing-saas-v3.html" class="dropdown-item">SaaS v.3</a></li>
                          <li><a href="landing-financial.html" class="dropdown-item">Financial Consulting</a></li>
                          <li><a href="landing-online-courses.html" class="dropdown-item">Online Courses</a></li>
                        </ul>
                      </div>
                      <div class="mega-dropdown-column pt-lg-3 pb-lg-4">
                        <ul class="list-unstyled mb-0">
                          <li><a href="landing-medical.html" class="dropdown-item">Medical</a></li>
                          <li><a href="landing-software-company.html" class="dropdown-item">IT (Software) Company</a></li>
                          <li><a href="landing-conference.html" class="dropdown-item">Conference</a></li>
                          <li><a href="landing-digital-agency.html" class="dropdown-item">Digital Agency</a></li>
                          <li><a href="landing-blog.html" class="dropdown-item">Blog Homepage</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                  <div class="dropdown-menu">
                    <div class="d-lg-flex pt-lg-3">
                      <div class="mega-dropdown-column">
                        <h6 class="px-3 mb-2">About</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="about-v1.html" class="dropdown-item py-1">About v.1</a></li>
                          <li><a href="about-v2.html" class="dropdown-item py-1">About v.2</a></li>
                        </ul>
                        <h6 class="px-3 mb-2">Blog</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="blog-list-with-sidebar.html" class="dropdown-item py-1">List View with Sidebar</a></li>
                          <li><a href="blog-grid-with-sidebar.html" class="dropdown-item py-1">Grid View with Sidebar</a></li>
                          <li><a href="blog-list-no-sidebar.html" class="dropdown-item py-1">List View no Sidebar</a></li>
                          <li><a href="blog-grid-no-sidebar.html" class="dropdown-item py-1">Grid View no Sidebar</a></li>
                          <li><a href="blog-simple-feed.html" class="dropdown-item py-1">Simple Feed</a></li>
                          <li><a href="blog-single.html" class="dropdown-item py-1">Single Post</a></li>
                          <li><a href="blog-podcast.html" class="dropdown-item py-1">Podcast</a></li>
                        </ul>
                      </div>
                      <div class="mega-dropdown-column">
                        <h6 class="px-3 mb-2">Portfolio</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="portfolio-grid.html" class="dropdown-item py-1">Grid View</a></li>
                          <li><a href="portfolio-list.html" class="dropdown-item py-1">List View</a></li>
                          <li><a href="portfolio-slider.html" class="dropdown-item py-1">Slider View</a></li>
                          <li><a href="portfolio-courses.html" class="dropdown-item py-1">Courses</a></li>
                          <li><a href="portfolio-single-project.html" class="dropdown-item py-1">Single Project</a></li>
                          <li><a href="portfolio-single-course.html" class="dropdown-item py-1">Single Course</a></li>
                        </ul>
                        <h6 class="px-3 mb-2">Services</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="services-v1.html" class="dropdown-item py-1">Services v.1</a></li>
                          <li><a href="services-v2.html" class="dropdown-item py-1">Services v.2</a></li>
                          <li><a href="services-single-v1.html" class="dropdown-item py-1">Service Details v.1</a></li>
                          <li><a href="services-single-v2.html" class="dropdown-item py-1">Service Details v.2</a></li>
                        </ul>
                      </div>
                      <div class="mega-dropdown-column">
                        <h6 class="px-3 mb-2">Pricing</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="pricing.html" class="dropdown-item py-1">Pricing Page</a></li>
                        </ul>
                        <h6 class="px-3 mb-2">Contacts</h6>
                        <ul class="list-unstyled mb-3">
                          <li><a href="contacts-v1.html" class="dropdown-item py-1">Contacts v.1</a></li>
                          <li><a href="contacts-v2.html" class="dropdown-item py-1">Contacts v.2</a></li>
                          <li><a href="contacts-v3.html" class="dropdown-item py-1">Contacts v.3</a></li>
                        </ul>
                        <h6 class="px-3 mb-2">Specialty</h6>
                        <ul class="list-unstyled">
                          <li><a href="404-v1.html" class="dropdown-item py-1">404 Error v.1</a></li>
                          <li><a href="404-v2.html" class="dropdown-item py-1">404 Error v.2</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown" aria-current="page">Account</a>
                  <ul class="dropdown-menu">
                    <li><a href="account-details.html" class="dropdown-item">Account Details</a></li>
                    <li><a href="account-security.html" class="dropdown-item">Security</a></li>
                    <li><a href="account-notifications.html" class="dropdown-item">Notifications</a></li>
                    <li><a href="account-messages.html" class="dropdown-item">Messages</a></li>
                    <li><a href="account-saved-items.html" class="dropdown-item">Saved Items</a></li>
                    <li><a href="account-collections.html" class="dropdown-item">My Collections</a></li>
                    <li><a href="account-payment.html" class="dropdown-item">Payment Details</a></li>
                    <li><a href="account-signin.html" class="dropdown-item">Sign In</a></li>
                    <li><a href="account-signup.html" class="dropdown-item">Sign Up</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a href="components/typography.html" class="nav-link">UI Kit</a>
                </li>
                <li class="nav-item">
                  <a href="docs/getting-started.html" class="nav-link">Docs</a>
                </li>
              </ul> -->
            </div>
            <!-- <div class="offcanvas-header border-top">
              <a href="https://themes.getbootstrap.com/product/silicon-business-technology-template-ui-kit/" class="btn btn-primary w-100" target="_blank" rel="noopener">
                <i class="bx bx-cart fs-4 lh-1 me-1"></i>
                &nbsp;Buy now
              </a>
            </div>       -->
          </div>

          

          <div class="d-none d-md-flex align-items-center order-lg-2 ms-auto">
          <!-- <a href="#searchCollapse" class="nav-link px-2" data-bs-toggle="collapse">
            <i class="bx bx-search text-light fs-4 mx-1"></i>
          </a>
          <a href="#" class="nav-link d-none d-lg-block">
            <i class="bx bx-user text-light fs-4 mx-1"></i>
          </a>
   -->
        </div>
        <div class="d-block d-md-block form-check form-switch mode-switch pe-lg-1 ms-auto" data-bs-toggle="mode">
          <input type="checkbox" class="form-check-input" id="theme-mode">
          <!-- <label class="form-check-label d-none d-sm-block" for="theme-mode">Mode</label>
          <label class="form-check-label d-none d-sm-block" for="theme-mode"></label>  -->
        </div>
 

          <button type="button" class="navbar-toggler me-4 me-md-0" data-bs-toggle="offcanvas" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <!-- <a href="https://themes.getbootstrap.com/product/silicon-business-technology-template-ui-kit/" class="btn btn-primary btn-sm fs-sm rounded d-none d-lg-inline-flex" target="_blank" rel="noopener">
            <i class="bx bx-cart fs-5 lh-1 me-1"></i>
            &nbsp;Buy now
          </a> -->
        </div>
      </header>


      <!-- Page content -->
      <section class="position-relative h-100 pt-5 pb-4">

        <!-- Sign in form -->
        <div class="container d-flex flex-wrap justify-content-center justify-content-xl-start h-100 pt-5">
          <div class="w-100 align-self-end pt-1 pt-md-4 pb-4" style="max-width: 526px;">
            <h1 class="text-center text-xl-start">Welcome</h1>
            <p class="text-center text-xl-start pb-3 mb-3">Don’t have an account yet? <a href="account-signup.php">Register here.</a></p>
            <form class="needs-validation mb-2" novalidate action="account-details.php">
              <div class="position-relative mb-4">
                <label for="email" class="form-label fs-base">Email</label>
                <input type="email" id="email" class="form-control form-control-lg" required>
                <div class="invalid-feedback position-absolute start-0 top-100">Please enter a valid email address!</div>
              </div>
              <div class="mb-4">
                <label for="password" class="form-label fs-base">Password</label>
                <div class="password-toggle">
                  <input type="password" id="password" class="form-control form-control-lg" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"></span>
                  </label>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter your password!</div>
                </div>
              </div>
              <div class="mb-4">
                <div class="form-check">
                  <input type="checkbox" id="remember" class="form-check-input">
                  <label for="remember" class="form-check-label fs-base">Remember me</label>
                </div>
              </div>
              <button type="submit" class="btn btn-primary shadow-primary btn-lg w-100">Sign in</button>
            </form>
            <a href="#" class="btn btn-link btn-lg w-100">Forgot your password?</a>
            <hr class="my-4">
            <h6 class="text-center mb-4">Or sign in with your social network</h6>
            <div class="row row-cols-1 row-cols-sm-2">
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-google btn-lg w-100">
                  <i class="bx bxl-google fs-xl me-2"></i>
                  Google
                </a>
              </div>
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-facebook btn-lg w-100">
                  <i class="bx bxl-facebook fs-xl me-2"></i>
                  Facebook
                </a>
              </div>
            </div>
          </div>
          <div class="w-100 align-self-end">
            <p class="nav d-block fs-xs text-center text-xl-start pb-2 mb-0">
              &copy; All rights reserved. Made by 
              <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
            </p>    
          </div>
        </div>
        
        <!-- Background -->
        <div class="position-absolute top-0 end-0 w-50 h-100 bg-position-center bg-repeat-0 bg-size-cover d-none d-xl-block" style="background-image: url(assets/img/account/signin-bg.jpg);"></div>
      </section>
    </main>


    <!-- Back to top button -->
    <a href="#top" class="btn-scroll-top" data-scroll>
      <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
      <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
    </a>


    <!-- Vendor Scripts -->
    <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

    <!-- Main Theme Script -->
    <script src="assets/js/theme.min.js"></script>
  </body>
</html>

--FILE index.php
<?php include('template-parts\head.php');?>


  <!-- Body -->
  <body>

    <!-- Page loading spinner -->
    <div class="page-loading active">
      <div class="page-loading-inner">
        <div class="page-spinner"></div><span>Loading...</span>
      </div>
    </div>


    <!-- Page wrapper for sticky footer -->
    <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
    <main class="page-wrapper">


      <!-- Navbar -->
      <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->

      
      <?php include('template-parts\menu-login.php');?>


      <!-- Page content -->
      <section class="position-relative h-100 pt-5 pb-4">

        <!-- Sign in form -->
        <div class="container d-flex flex-wrap justify-content-center justify-content-xl-start h-100 pt-5">
          <div class="w-100 align-self-end pt-1 pt-md-4 pb-4" style="max-width: 526px;">
            <h1 class="text-center text-xl-start">Welcome</h1>
            <p class="text-center text-xl-start pb-3 mb-3">Don’t have an account yet? <a href="account-signup.php">Register here.</a></p>
            <form class="needs-validation mb-2" novalidate action="backend/account-signin.php" method="post">
              <div class="position-relative mb-4">
                <label for="email" class="form-label fs-base">Login</label>
                <input type="text" name="username" id="email" class="form-control form-control-lg" required>
                <div class="invalid-feedback position-absolute start-0 top-100">Please enter a valid email address!</div>
              </div>
              <div class="mb-4">
                <label for="password" class="form-label fs-base">Password</label>
                <div class="password-toggle">
                  <input name="password" type="password" id="password" class="form-control form-control-lg" required>
                  <label class="password-toggle-btn" aria-label="Show/hide password">
                    <input class="password-toggle-check" type="checkbox">
                    <span class="password-toggle-indicator"></span>
                  </label>
                  <div class="invalid-feedback position-absolute start-0 top-100">Please enter your password!</div>
                </div>
              </div>
              <div class="mb-4">
                <div class="form-check">
                  <input type="checkbox" id="remember" class="form-check-input">
                  <label for="remember" class="form-check-label fs-base">Remember me</label>
                </div>
              </div>
              <button type="submit" class="btn btn-primary shadow-primary btn-lg w-100">Sign in</button>
            </form>
            <a href="#" class="btn btn-link btn-lg w-100">Forgot your password?</a>
            <hr class="my-4">
            <h6 class="text-center mb-4">Or sign in with your social network</h6>
            <div class="row row-cols-1 row-cols-sm-2">
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-google btn-lg w-100">
                  <i class="bx bxl-google fs-xl me-2"></i>
                  Google
                </a>
              </div>
              <div class="col mb-3">
                <a href="#" class="btn btn-icon btn-secondary btn-facebook btn-lg w-100">
                  <i class="bx bxl-facebook fs-xl me-2"></i>
                  Facebook
                </a>
              </div>
            </div>
          </div>
          <div class="w-100 align-self-end">
            <p class="nav d-block fs-xs text-center text-xl-start pb-2 mb-0">
              &copy; All rights reserved. Made by 
              <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
            </p>    
          </div>
        </div>
        
        <!-- Background -->
        <div class="position-absolute top-0 end-0 w-50 h-100 bg-position-center bg-repeat-0 bg-size-cover d-none d-xl-block" style="background-image: url(assets/img/account/signin-bg.jpg);"></div>
      </section>
    </main>


    <!-- Back to top button -->
    <a href="#top" class="btn-scroll-top" data-scroll>
      <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
      <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
    </a>


    <!-- Vendor Scripts -->
    <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

    <!-- Main Theme Script -->
    <script src="assets/js/theme.min.js"></script>
  </body>
</html>

--FILE README.md
## The documentation is available online here:
https://silicon.createx.studio/docs/getting-started.html
OR
**Offline**: inside Silicon/docs folder

## To download Figma files which include all design mockups follow the link below:
https://drive.google.com/drive/folders/18CnOLboHfdsTST5MC7KEp6IUt8yBpAwk?usp=sharing

## Theme Installation Steps:
1. Install Node.js and Npm (Node Package Manager)
https://nodejs.org/en/
2. Run `npm install` in your terminal to install all project dependencies
3. After the installation is completed run `gulp` to launch the project. It should automatically opens Createx homepage in your browser (http://localhost:3000/)

**For more details see the documentation that comes with the theme.**


--FILE remove.php
<?php

function checkDatabaseConnection():mysqli {

    define('DB_SERVER', 'srv1213.hstgr.io');
    define('DB_USERNAME', 'u428535412_folotruck');
    define('DB_PASSWORD', 'bsKHY2%tX3rPyFm&nV');
    define('DB_DATABASE', 'u428535412_folotruck');

    // Create connection
    $conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    }
     /** @var mysqli $conn */
    return $conn;
}
?>

--FILE run.html
<!DOCTYPE html>
<html>
<head>
    <title>Test Autocomplete</title>
    <style>
        #latBox, #lngBox {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <input class="form__input-autocomplete--map" type="text" placeholder="Enter a location" id="autocompleteInput" style="width:400px; height:400px">
    <div id="latBox">Latitude: </div>
    <div id="lngBox">Longitude: </div>

    <script>
        var autocomplete;

        function initAutocomplete() {
            autocomplete = new google.maps.places.Autocomplete(
                document.getElementById('autocompleteInput'),
                { types: ['geocode'] }
            );

            autocomplete.addListener('place_changed', onPlaceChanged);
        }

        function onPlaceChanged() {
            var place = autocomplete.getPlace();
            if (!place.geometry) {
                // User entered the name of a Place that was not suggested and pressed the Enter key, or the Place Details request failed.
                window.alert("No details available for input: '" + place.name + "'");
                return;
            }

            // Display the latitude and longitude
            document.getElementById('latBox').textContent = 'Latitude: ' + place.geometry.location.lat();
            document.getElementById('lngBox').textContent = 'Longitude: ' + place.geometry.location.lng();
        }
    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVAu56etJjhaNzoTDXGvkCGgoNY0icts&libraries=places&callback=initAutocomplete"></script>
</body>
</html>


--FILE test.php
<?php
//You should probably improve that
include 'backend/account-details.php';  // Include the backend file to get the driver's data
// $combinedData = getCombinedDriverData();

// if (empty($driversData)) {
//   echo "No driver data found.";
//   exit;
// }


?>

<?php
$pageTitle = "Silicon | Account - Details";
include('template-parts//header/head-logged.php');
?>


<!-- Body -->

<body>

  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>


  <!-- Page wrapper for sticky footer -->
  <!-- Wraps everything except footer to push footer to the bottom of the page if there is little content -->
  <main class="page-wrapper">


    <!-- Navbar -->
    <!-- Remove "fixed-top" class to make navigation bar scrollable with the page -->


    <?php include './account-header.php'; ?>



    <!-- Page content -->
    <section class="container pt-5">
      <div class="row">


        <!-- Sidebar (User info + Account menu) -->
        <?php include './account-aside.php'; ?>



        <!-- Account details -->
        <div class="col-md-8 offset-lg-1 pb-5 mb-2 mb-lg-4 pt-md-5 mt-n3 mt-md-0">
          <div class="ps-md-3 ps-lg-0 mt-md-2 pt-md-4 pb-md-2">
            <h1 class="h2 pt-xl-1 pb-3">New route</h1>

            <!-- Password -->
            <h2 class="h5 text-primary mb-4">Basic information</h2>
            <form class="needs-validation border-bottom pb-3 pb-lg-4" action="backend/account-route.php" method="post">
              <div class="row">
                <!-- <div class="col-sm-6 mb-4">
                  <label for="cp" class="form-label fs-base">Truck number plates</label>

                  <input name="name" id="cp" class="form-control form-control-lg" value="" required="">




                </div>
              </div> -->

                <div class="row">
                  <div class="col-sm-6 mb-4">
                    <label for="np" class="form-label fs-base">Truck plates</label>

                    <input oninput="transformInput()" type="text" id="np" name="phoneNumber" class="form-control form-control-lg" required="">



                  </div>
                  <!-- <div class="col-sm-6 mb-4">
                  <label for="cp" class="form-label fs-base">Set the Pin optional</label>

                  <input id="cp"  name="password" class="form-control form-control-lg" value="" >


                </div> -->

                </div>
                <div class="px-3 row mb-4 mt-2">
                  <hr>
                </div>
                <div class="row pb-2">
                  <div class="col-sm-6">
                    <label for="np" class="form-label fs-base">Origin</label>
                    <div class="add-stop">
                      <input type="text" name="startDestination" id="np" class="form-control form-control-lg" required="">
                      <div id="map-origin" class="map-container" style="height: 400px;"></div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <label for="cnp" class="form-label fs-base">Add a Stop</label>
                    <div class="password-toggle">
                      <input type="text" id="cnp" class="form-control form-control-lg">
                      <div id="addStopBtn" class="password-toggle-btn" aria-label="Add Stop">
                        <i class="text-primary bx bx-plus"></i>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="stops">

                </div>

                <div class="row pb-2">
                  <div class="col-sm-6">
                    <label for="np" class="form-label fs-base">Destination</label>

                    <input type="text" id="np" name="endDestination" class="form-control form-control-lg" required="">
                    <div id="map-destination" class="map-container" style="height: 400px;"></div>

                    </label>



                  </div>
                  <div class="col-sm-6">
                    <label for="cnp" class="form-label fs-base">Add a Stop</label>
                    <div class="password-toggle">
                      <input type="text" id="cnpFinal" class="form-control form-control-lg">
                      <div id="addFinalStopBtn" class="password-toggle-btn" aria-label="Add Stop">
                        <i class="text-primary bx bx-plus"></i>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="finalStops">
                </div>



                <div class="px-3 row mb-4 mt-4">
                  <hr>
                </div>
                <div class="row pb-2">
                  <div class="col-sm-6 mb-4">
                    <label for="np" class="form-label fs-base">Client email</label>
                    <div class="password-toggle">
                      <input type="text" id="np" class="form-control form-control-lg">

                      <div class="invalid-tooltip position-absolute top-100 start-0">Incorrect password!</div>

                    </div>
                  </div>
                  <div class="col-sm-6 mb-4">
                    <label for="cnp" class="form-label fs-base">Client phone (+country prefix ex: 0034)</label>

                    <input type="text" id="cnp" class="form-control form-control-lg">


                  </div>
                </div>
                <div class="d-flex mb-3">
                  <a href="/account-details.html" type="reset" class="btn btn-secondary me-3">Cancel</a>
                  <button type="submit" class="btn btn-primary" type="submit">Create a route</button>
                </div>
            </form>

            <!-- Sessions -->
            <h2 class="h5 text-primary pt-1 pt-lg-3 mt-4">Information</h2>
            <p class="pb-3 mb-3">The info for the driver will be automatically sent after the creation of the route.</p>

          </div>
        </div>
      </div>
    </section>
  </main>



  <?php
  include('template-parts//footer/footer.php');
  ?>

    <h3>My Google Maps Test</h3>
    <div id="map" style="border:1px solid red; width:400px; height:400px; position:absolute;top:0"></div>

    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: -34.397, lng: 150.644},
                zoom: 8
            });

            map.addListener('click', function(e) {
                console.log("Latitude: " + e.latLng.lat() + ", Longitude: " + e.latLng.lng());
            });
        }
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVAu56etJjhaNzoTDXGvkCGgoNY0icts&callback=initMap">
    </script>


  <script>
    // JavaScript to handle the adding of stops
    document.addEventListener('DOMContentLoaded', function() {
      const addStopInput = document.getElementById('cnp');
      const addStopBtn = document.getElementById('addStopBtn');
      const stopsContainer = document.querySelector('.stops');
      let stopCount = 1;

      const addStop = () => {
        const stopValue = addStopInput.value.trim();

        if (stopValue || stopValue == "") {
          const newRow = document.createElement('div');
          newRow.classList.add('row', 'pb-2');

          const newCol = document.createElement('div');
          newCol.classList.add('col-sm-6', 'mb-2');

          const newLabel = document.createElement('label');
          newLabel.classList.add('form-label', 'fs-base');
          newLabel.setAttribute('for', `stop${stopCount}`);
          newLabel.textContent = `Stop ${stopCount}`;

          const newInput = document.createElement('input');
          newInput.type = 'text';
          newInput.name = `stop${stopCount}`;
          newInput.id = `stop${stopCount}`;
          newInput.classList.add('form-control', 'form-control-lg');
          newInput.required = true;
          newInput.value = stopValue;

          newCol.appendChild(newLabel);
          newCol.appendChild(newInput);
          newRow.appendChild(newCol);
          stopsContainer.appendChild(newRow);

          // Clear the add stop input
          addStopInput.value = '';
          stopCount++;
        }
      };

      addStopBtn.addEventListener('click', addStop);
      addStopInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault(); // Prevent form submission
          addStop();
        }
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const addFinalStopInput = document.getElementById('cnpFinal');
      const addFinalStopBtn = document.getElementById('addFinalStopBtn');
      const finalStopsContainer = document.querySelector('.finalStops');
      let finalStopCount = 1;

      const addFinalStop = () => {
        const stopValue = addFinalStopInput.value.trim();

        if (stopValue || stopValue == "") {
          const newRow = document.createElement('div');
          newRow.classList.add('row', 'pb-2');

          const newCol = document.createElement('div');
          newCol.classList.add('col-sm-6', 'mb-2');

          const newLabel = document.createElement('label');
          newLabel.classList.add('form-label', 'fs-base');
          newLabel.setAttribute('for', `finalStop${finalStopCount}`);
          newLabel.textContent = `Stop ${finalStopCount}`;

          const newInput = document.createElement('input');
          newInput.type = 'text';
          newInput.name = `finalStop${finalStopCount}`;
          newInput.id = `finalStop${finalStopCount}`;
          newInput.classList.add('form-control', 'form-control-lg');
          newInput.required = true;
          newInput.value = stopValue;

          newCol.appendChild(newLabel);
          newCol.appendChild(newInput);
          newRow.appendChild(newCol);
          finalStopsContainer.appendChild(newRow);

          // Clear the add stop input
          addFinalStopInput.value = '';
          finalStopCount++;
        }
      };

      addFinalStopBtn.addEventListener('click', addFinalStop);
      addFinalStopInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault(); // Prevent form submission
          addFinalStop();
        }
      });
    });
  </script>
  <script type="text/javascript">
    function transformInput() {
      var input = document.getElementById('np');
      input.value = input.value.replace(/\s+/g, '').toUpperCase();
    }
  </script>
  <!-- Back to top button -->
  <a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
  </a>


  



  <!-- Vendor Scripts -->
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script src="assets/vendor/cleave.js/dist/cleave.min.js"></script>

  <!-- Main Theme Script -->
  <script src="assets/js/theme.min.js"></script>
</body>

</html>



--FILE backend\account-change-profile.php
<?php
include_once 'db.php';  // Include database connection file
/** @var mysqli $conn */
$conn = checkDatabaseConnection();  // Get the database connection

session_start();

if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_FILES['profilePicture'])) {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $userId = $_SESSION['id'];  // Get the user ID from the session
    
    if ($_FILES['profilePicture']['type'] == 'image/jpeg') {
        // If it's a JPEG image, convert it to PNG
        $image = imagecreatefromjpeg($_FILES['profilePicture']['tmp_name']);
        ob_start(); // Start capturing stdout
        imagepng($image); // Print the PNG to stdout
        $pngData = ob_get_clean(); // Get the contents of stdout as a string
        imagedestroy($image); // Free up memory
    } else {
        $pngData = file_get_contents($_FILES['profilePicture']['tmp_name']);
    }

    // Prepare an SQL statement for updating the profile picture
    $stmt = $conn->prepare("UPDATE users SET profile_picture = ? WHERE id = ?");
    $null = NULL;
    $stmt->bind_param("bi", $null, $userId);
    $stmt->send_long_data(0, $pngData);  // Send the binary data
    
    if ($stmt->execute()) {
        echo "Profile picture updated successfully.";
        header("Location: ../account-details.php");
    } else {
        echo "Error updating profile picture.";
    }
    
    $stmt->close();
    $conn->close();
}


if ($_SERVER['REQUEST_METHOD'] === 'POST'  && !isset($_FILES['profilePicture'])) {
    $userId = $_SESSION['id'];
    
    switch ($_POST['formType']) {
        case 'email':
            $newEmail = $conn->real_escape_string($_POST['newEmail']);
            $sql = "UPDATE users SET email='$newEmail' WHERE id='$userId'";
            break;
        
        case 'username':
            $newUsername = $conn->real_escape_string($_POST['newUsername']);
            $sql = "UPDATE users SET username='$newUsername' WHERE id='$userId'";
            break;

        case 'password':
            $newPassword = password_hash($_POST['newPassword'], PASSWORD_DEFAULT);
            $sql = "UPDATE users SET password='$newPassword' WHERE id='$userId'";
            break;
        
        default:
            echo 'Invalid form type.';
            exit;
    }

    if ($conn->query($sql) === TRUE) {
        header("Location: ../account-details.php");
        echo "Record updated successfully";
      
    } else {
        header("Location: ../account-details.php");
        echo "Error updating record: " . $conn->error;
    }
    $conn->close();
}

--FILE backend\account-details.php
<?php

/** @var mysqli $conn */
include_once(__DIR__ . '/db.php'); 
session_start(); 

if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header('Location: login.php');
    exit;
}
function getCombinedDriverData(){
/** @var mysqli $conn */
$conn = checkDatabaseConnection();

$userId = $_SESSION['id']; 

$tableName = "user_" . $userId;
$getDataSql = "SELECT * FROM $tableName";
$dataResult = $conn->query($getDataSql);

$combinedData = [];

if ($dataResult->num_rows > 0) {
    while ($dataRow = $dataResult->fetch_assoc()) {
        $foreignId = $dataRow['foreign_id'];
        $individualTable = "driver_" . $userId . "_" . $foreignId."_data";

        $getIndividualDataSql = "SELECT * FROM $individualTable";
        $individualDataResult = $conn->query($getIndividualDataSql);
        
        $individualData = [];
        if ($individualDataResult->num_rows > 0) {
            while ($individualDataRow = $individualDataResult->fetch_assoc()) {
                $individualData[] = $individualDataRow;
            }
        }

        $combinedData[] = [
            'driverData' => $dataRow,
            'individualData' => $individualData
        ];
    }
}

$conn->close(); 

return $combinedData;}
?>
<?php


class MessageRenderer
{
    private $data;

    public function __construct($data)
    {
        $this->data = $data;
    }

    public function render()
    {
        $output = '';
        foreach ($this->data as $message) {
            $output .= $this->renderMessage($message);
        }
        return $output;
    }

    public function renderMessage($message)
    {
        $messageType = htmlspecialchars($message['message_type']);
        $messageValue = htmlspecialchars($message['message_value']);
        $messageTime = htmlspecialchars($message['message_time']);
        // Note: You should escape these values to prevent XSS attacks if they can be user-provided

        if (str_contains($this->data['message_type'], 'unloaded')) {
            return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark">' . 'Unloaded' . ': </div>
                <span class="">' . $messageTime . '</span>
            </div>';
        }
        elseif (str_contains($this->data['message_type'], 'loaded the truck')) {
            return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark">' . 'Loaded' . ': </div>
                <span class="">'  . $messageTime . '</span>
            </div>';
        }    
        elseif (str_contains($this->data['message_type'], 'delay')) {
            $decodedMessageValue = htmlspecialchars_decode($messageValue);
            return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark">' . 'Delays:' . '</div>
                <span class="">'   . $decodedMessageValue  . '</span>
            </div>';
        }

        elseif (str_contains($this->data['message_type'], 'photo')) {
            $decodedMessageValue = htmlspecialchars_decode($messageValue);

            $messageImage = htmlspecialchars($message['message_image']);
            return '
            <div class="mb-3">
            <div class="fw-500 text-dark" for="input-base  "> CMR: </div>
            <div class="mt-2"><img loading="lazy" src="https://folotruck.com/backend/mobile'.$messageImage.' "></div>
              
            </div>';
        }



        return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark">' . ucfirst($messageType) . ': </div>
                <span class="">'  . $messageTime . '</span>
            </div>';
    }
}


class UserDriverDataFetcher
{
    private $userId;
    private $driverId;
    /** @var mysqli $conn */
    private $conn;

    public function __construct($userId, $driverId)
    {
        $this->userId = $userId;
        $this->driverId = $driverId;
        $this->conn = checkDatabaseConnection();  // Assuming you have a method to get the DB connection
    }

    public function fetchData()
    {
        $tableName = "driver_" . $this->userId . "_" . $this->driverId . "_data";
        $sql = "SELECT data_id, message_type, message_time, message_value, message_image FROM $tableName ORDER BY message_time DESC";
        
        $result = $this->conn->query($sql);

        $data = [];

        if ($result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                $data[] = $row;
            }
        }

        return $data;
    }
}

class UserDriverDataRenderer
{
    private $data;

    public function __construct($data)
    {
        $this->data = $data;
    }

    public function render()
    {
        $output = '';
          
            if (str_contains($this->data['message_type'], 'unloaded')) {
                $output .= $this->renderUnloaded($this->data);
            }
            elseif (str_contains($this->data['message_type'], 'loaded')) {
                $output .= $this->renderLoaded($this->data);
            }    
            elseif (str_contains($this->data['message_type'], 'delay')) {
                $output .= $this->renderUnloaded($this->data);
            }
        
        return $output;
    }

    private function renderLoaded($data)
    {
        $messageTime = htmlspecialchars($data['message_time']);
        return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark" for="input-base">Loaded: </div>
                <span class="">' . $messageTime . '</span>
            </div>';
    }

    private function renderUnloaded($data)
    {
        $messageTime = htmlspecialchars($data['message_time']);
        return '
            <div class="mb-3 d-flex">
                <div class="fw-500 text-dark" for="input-base">Loaded: </div>
                <span class="">' . $messageTime . '</span>
        </div>';
        // Similar to the above, adjust as needed for unloaded state
    }

    private function renderDelayed($data)
    {
        $messageTime = htmlspecialchars($data['message_time']);
        $messageValue = htmlspecialchars($data['message_time']);
        return '
        <div class="d-flex">
        <div class="fw-500 text-dark " for="input-base  ">Delay 1: </div>
        <div class="">
          <div class="">' . $messageTime .'</div>
          <div class="">Paris , 300 minutes</div>
          <div class="">'. $messageValue .'. </div>
        </div>
      </div>';
        // Similar to the above, adjust as needed for unloaded state
    }

}

?>

--FILE backend\account-personal.php
<?php


include_once(__DIR__ . '/db.php'); 


if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header('Location: login.php');
    exit;
}

/** @var mysqli $conn */
$conn = checkDatabaseConnection();

$userId = $_SESSION['id'];

$sql = "SELECT username, email, profile_picture FROM users WHERE id = $userId";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    $row = $result->fetch_assoc();
    $username = $row['username'];
    $email = $row['email'];
    $profilePicture = $row['profile_picture'];
} else {
    echo "User not found";
    exit;
}

$conn->close();


function changeProfile() {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();; // Use the $conn variable from db.php or establish a new connection

    if(isset($_FILES['profilePicture'])) {
        $file = $_FILES['profilePicture'];
        
        // Validate file type
        $allowedTypes = array(IMAGETYPE_PNG, IMAGETYPE_JPEG, IMAGETYPE_GIF);
        $detectedType = exif_imagetype($file['tmp_name']);
        $error = !in_array($detectedType, $allowedTypes);
        
        if (!$error && $file['size'] <= 1048576) { // Check if there's no error and file size is <= 1MB
            $image = file_get_contents($file['tmp_name']); // Get image content
            $image = mysqli_real_escape_string($conn, $image); // Escape the binary string
            
            $userId = $_SESSION['id']; // Assume the user ID is stored in session
            
            // Update the profile picture in the database
            $query = "UPDATE users SET profile_picture='$image' WHERE id='$userId'";
            mysqli_query($conn, $query);
            
            echo "Profile picture updated successfully!";
        } else {
            echo "Please select a valid image file (PNG, JPEG, GIF) not larger than 1MB.";
        }
    }
}

// Call the changeProfile function if form is submitted

?>

--FILE backend\account-route.php
<?php

include_once 'db.php'; 
include_once 'helper.php';  // Include the helper functions file

session_start(); 

if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header('Location: login.php');
    exit;
}



/** @var mysqli $conn */
$conn = checkDatabaseConnection();


// CREATE TABLE IF NOT EXISTS drivers (
//     some_id INT AUTO_INCREMENT PRIMARY KEY,
//     username VARCHAR(255) NOT NULL,
//     password VARCHAR(255) NOT NULL,
//     totalD VARCHAR(255) NOT NULL,
//     total_destination VARCHAR(255) NOT NULL,
//     status VARCHAR(255) NOT NULL,
//     user_id INT NOT NULL,
//     driver_id INT NOT NULL
// )";




// Function to add a new driver to the 'drivers' table
function addDriver($username, $password, $userId, $driverId, $totalDestination) {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();
    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);
    $defaultWaypoints = '[{"lat": 41.3874, "lng": 2.1686}, {"lat": 52.5200, "lng": 13.4050}]';

    $sql = "INSERT INTO drivers (username, password, user_id, driver_id, total_destination, waypoints) 
            VALUES ('$username', '$hashedPassword', '$userId', '$driverId', '$totalDestination', '$defaultWaypoints')";
    if ($conn->query($sql) === TRUE) {
        return true;
    } else {
        return "Error: " . $conn->error;
    }
    $conn->close();
}


// Handle the form submission
if ($_SERVER["REQUEST_METHOD"] == "POST") {ą
    $adminId = $_SESSION['id'];  // Retrieving admin ID from session

    $name = $_POST['password'];
    $password = $_POST['password'];
    $phoneNumber = $_POST['phoneNumber'];
    $startDestination = $_POST['startDestination'];
    $endDestination = $_POST['endDestination'];

    $middleDestination = '';
    $i = 1;
    while(isset($_POST['stop' . $i])) {
        $middleDestination .= mysqli_real_escape_string($conn, $_POST['stop' . $i]) . ', ';
        $i++;
    }


    $finalStops = [];
    $j = 1;
    while(isset($_POST['finalStop' . $j])) {
        $finalStops[] = mysqli_real_escape_string($conn, $_POST['finalStop' . $j]);
        $j++;
    }
    
    // Reversing the final stops and concatenating to middleDestination
 
    foreach($finalStops as $finalStop) {
        $middleDestination .= $finalStop . ', ';
    }
    


    $middleDestination = rtrim($middleDestination, ', '); 
    if ($middleDestination != '') {
        $totalDestination = $startDestination . ', ' . $middleDestination . ', ' . $endDestination;
    } else {
        $totalDestination = $startDestination . ', ' . $endDestination;
    }
    
    // Define the default waypoints JSON string
    $defaultWaypoints = '';

    // Inserting new driver into the user_id table created for the admin
    $sqlInsertDriver = "INSERT INTO user_$adminId (name, phone_number, start_destination, middle_destination, end_destination, submission_time) 
                        VALUES ('$name', '$phoneNumber', '$startDestination', '$middleDestination' , '$endDestination', NOW())";
    
    $insertResult = executeQuery($conn, $sqlInsertDriver);
    
    if ($insertResult === true) {

        $driverId = $conn->insert_id; // Get the ID of the newly inserted driver
        $driverUsername = $_POST['phoneNumber'];  // Replace with actual username
        $driverPassword = $_POST['password'];  // Replace with actual password
        $addDriverResult = addDriver($driverUsername, $driverPassword, $adminId, $driverId, $totalDestination);


        if ($addDriverResult !== true) {
            echo "Error adding driver: " . $addDriverResult;
        }


       

        // Create an external table for the specific driver
        $driverTableName = "driver_" . $adminId. '_'. $driverId . "_data";
        $sqlCreateDriverTable = "CREATE TABLE $driverTableName (
            data_id INT AUTO_INCREMENT PRIMARY KEY,
            message_type VARCHAR(255) NOT NULL,
            message_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
            message_value TEXT NOT NULL,
            message_image VARCHAR(255)
        ) ENGINE=InnoDB";
        echo createTable($conn, $sqlCreateDriverTable, $driverTableName);

        $sqlUpdateDriver = "UPDATE user_$adminId SET foreign_id = $driverId WHERE driver_id = $driverId";
        $updateResult = executeQuery($conn, $sqlUpdateDriver);

if ($updateResult !== true) {
    echo "Error updating foreign ID: " . $conn->error; // Print error message
} else {
    echo "Foreign ID updated successfully.";
    header("Location: ../account-details.php");
}
      
        //exit();
        // if ($updateResult !== true) {
        //     header("Location: ../account-details.php");
        //     echo $updateResult;
        // } else {
        //     header("Location: ../account-details.php");
        //     echo "New driver created successfully and foreign key set.";
        // }
    } else {
        echo $insertResult;
    }
}

$conn->close();
?>

--FILE backend\account-signin.php
<?php
include_once 'db.php'; // Include your database connection file


// Process login form submission
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $username = mysqli_real_escape_string($conn, $_POST['username']); // Escape user inputs to prevent SQL injection
    $password = $_POST['password']; // Get the password from POST request

    // Retrieve the user's data from the users table
    $sql = "SELECT * FROM users WHERE username = '$username'";
    $result = $conn->query($sql);

    if ($result->num_rows > 0) {
        // Output data of each row
        $row = $result->fetch_assoc();

        if (password_verify($password, $row['password'])) { // Check if the password matches the hash stored in the database
            session_start();
            $_SESSION['loggedin'] = true;
            $_SESSION['username'] = $username;
            $_SESSION['id'] = $row['id'];  // Storing user ID in the session
            header("Location: ../account-details.php"); 
        } else {
            header("Location: ../account-signin.php"); 
            echo "Invalid password.";
        }
    } else {
        header("Location: ../account-signin.php"); 
        echo "Invalid username.";
    }

    $conn->close();  // Close the connection
}

?>

<!-- Login Form -->
<form method="post">
    Username: <input type="text" name="username" required><br>
    Password: <input type="password" name="password" required><br>
    <input type="submit" value="Login">
</form>

--FILE backend\account-signout.php
<?php
// Starting the session
session_start();

// Destroying all sessions
if(session_destroy()) {
    // Redirecting to the login page
    header("Location: ../account-signin.php");
    exit;
}
?>

--FILE backend\account-signup.php
<?php
include_once 'db.php';  // Include database connection file
include_once 'helper.php';

/** @var mysqli $conn */
$conn = checkDatabaseConnection();  // Get the database connection

session_start();


if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();

    $username = mysqli_real_escape_string($conn, $_POST['username']);

    $checkUsernameSql = "SELECT username FROM users WHERE username = '$username'";
    $checkResult = $conn->query($checkUsernameSql);




    if ($checkResult->num_rows > 0) {
        // If username is taken, redirect back to the signup page with an error parameter
        header("Location: ../signup.php?error=username_taken");
    } else {
        $password = password_hash($_POST['password'], PASSWORD_DEFAULT);
        $sql = "INSERT INTO users (username, password) VALUES ('$username', '$password')";

        $executionResult = executeQuery($conn, $sql);

        if ($executionResult === true) {
            $last_id = $conn->insert_id;

            $tableName = "user_" . $last_id;
            $createTableSql = "CREATE TABLE $tableName (
                driver_id INT AUTO_INCREMENT PRIMARY KEY,
                name VARCHAR(255) NOT NULL,
                phone_number VARCHAR(20) NOT NULL,
                start_destination VARCHAR(255) NOT NULL,
                middle_destination VARCHAR(255) NOT NULL,
                end_destination VARCHAR(255) NOT NULL,
                foreign_id INT NULL,
                submission_time DATETIME NOT NULL
            ) ENGINE=InnoDB";

            createTable($conn, $createTableSql, $tableName);

            // If registration is successful, redirect to the login page
            //header("Location: ../login.php?success=registered");
        } else {
            // If an error occurred during registration, redirect back to the signup page with an error parameter
            header("Location: ../signup.php?error=registration_failed");
        }

            // Directly using an existing image file for the profile picture
            $avatarPath = "../assets/img/avatar/0.png";  // The path to the existing image file

            if (file_exists($avatarPath)) {
                $profilePicture = file_get_contents($avatarPath);  // Get the content of the image file
                $profilePicture = mysqli_real_escape_string($conn, $profilePicture);  // Escape the binary data

                // SQL query to update the profile picture
                $sql = "UPDATE users SET profile_picture = '$profilePicture' WHERE id = $last_id";
                
                if ($conn->query($sql) === TRUE) {
                    echo "Profile picture updated successfully.";
                    header("Location: ../account-signin.php");
                } else {
                    echo "Error updating profile picture: " . $conn->error;
                }
            } else {
                echo "Profile picture file does not exist.";
            }
            header("Location: ../account-signin.php");

    }

    $conn->close();
    exit; // Ensure that the script stops executing after a redirect
}
?>

--FILE backend\db.php
<?php

function checkDatabaseConnection(){

    if (!defined('DB_SERVER')) {
        define('DB_SERVER', 'srv1213.hstgr.io');
    }
    
    if (!defined('DB_USERNAME')) {
        define('DB_USERNAME', 'u428535412_folotruck');
    }
    
    if (!defined('DB_PASSWORD')) {
        define('DB_PASSWORD', 'bsKHY2%tX3rPyFm&nV');
    }
    
    if (!defined('DB_DATABASE')) {
        define('DB_DATABASE', 'u428535412_folotruck');
    }

    // Create connection
    $conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    }
     /** @var mysqli $conn */
    return $conn;
}
?>

--FILE backend\helper.php
<?php

function createTable($conn, $sql, $tableName) {
    if ($conn->query($sql) === TRUE) {
        return "Table '$tableName' created successfully.";
    } else {
        return "Error creating table '$tableName': " . $conn->error;
    }
}

function executeQuery($conn, $sql) {
    if ($conn->query($sql) === TRUE) {
        return true;
    } else {
        return "Error executing query: " . $conn->error;
    }
}

?>

--FILE backend\test.php
<?php

// Assuming you're sending data as JSON
header('Content-Type: application/json');

// Retrieve the data sent from the app
$inputJSON = file_get_contents('php://input');
$input = json_decode($inputJSON, TRUE); // Convert JSON to array

// Check if the data is received correctly
if ($input) {
    // Process your data here
    // ...

    // Prepare the response
    $response = array(
        "success" => true,
        "data" => $input, // Echo back the received data
        "test" => "success"
    );
} else {
    // Handle the error case
    $response = array(
        "success" => false,
        "error" => "No data received"
    );
}

// Send the response back to the app
echo json_encode($response);
?>

--FILE scripts\account-route.js
// Google Maps initialization function
function initMap(mapId, inputId, latId, lngId) {
  var map = new google.maps.Map(document.getElementById(mapId), {
    center: {
      lat: -34.397,
      lng: 150.644
    },
    zoom: 8
  });

  map.addListener('click', function(e) {
    document.getElementById(inputId).value = e.latLng.lat() + ', ' + e.latLng.lng();
    document.getElementById(latId).value = e.latLng.lat();
    document.getElementById(lngId).value = e.latLng.lng();
  });
  // Update m debbugerap when lat/lng fields change
  document.getElementById(latId).addEventListener('change', function() {
    updateMapFromFields(latId, lngId, map);
  });
  document.getElementById(lngId).addEventListener('change', function() {
    updateMapFromFields(latId, lngId, map);
  });
}

function updateMapFromFields(latId, lngId, map) {
  const lat = parseFloat(document.getElementById(latId).value);
  const lng = parseFloat(document.getElementById(lngId).value);

  if (!isNaN(lat) && !isNaN(lng)) {
    const newPos = new google.maps.LatLng(lat, lng);
    map.setCenter(newPos);
  }
}

function updateFieldsFromMap(latId, lngId, position) {
  document.getElementById(latId).value = position.lat();
  document.getElementById(lngId).value = position.lng();
}
// Function to add a stop with a map
function addStop(container, label, count) {
  const newInputId = `${label}Input${count}`;
  const newMapId = `map-${label}${count}`;
  const newLatId = `latitude${count}`;
  const newLngId = `longitude${count}`;
  const collapseId = `collapse-${newInputId}`;

  const newStopHtml = `
    <div>
      <div class="row">
        <div class="col-12"><hr class="my-2" style="color:#e1e1e1 !important"></div>
        <div class="row">
          <div class="col-sm-6 mb-2">
            <label for="${newInputId}" class="form-label fs-base">Stop ${count}</label>

            <div class="password-toggle">
                  <input type="text"  name="${label}[]" class="form-control form-control-lg" required>
                  <div id="a" class="password-toggle-btn" aria-label="Add Stop">

                      <h2 class="accordion-header" id="heading-${newInputId}">
                          <button class="accordion-button collapsed map-tab" type="button" data-bs-toggle="collapse"
                              data-bs-target="#${collapseId}" aria-expanded="true" aria-controls="${collapseId}">
                              <i class="text-primary bx bx-chevron-down tab__symbol--show"></i>
                              <i class="text-primary bx bx-chevron-up tab__symbol--collapse"></i>
                          </button>
                      </h2>

                  </div>
            </div>
          </div>
        </div>

          <div class="row collapse" id="${collapseId}">
          <div class="col-sm-6">
            <div id="${newMapId}" class="map-container mt-2 mb-4" style="height: 400px;"></div>
          </div>
          
          <div class="col-sm-6">
            <label for="placeName${count}" class="form-label fs-base">Name of the Place</label>
            <input type="text" id="placeName${count}" class="form-control form-control-lg">
      
            <label for="desiredName${count}" class="form-label fs-base">Desired Name</label>
            <input type="text" id="desiredName${count}" class="form-control form-control-lg">
        
            <label for="${newLatId}" class="form-label fs-base">Latitude</label>
            <input type="text" id="${newLatId}" class="form-control form-control-lg">
      
            <label for="${newLngId}" class="form-label fs-base">Longitude</label>
            <input type="text" id="${newLngId}" class="form-control form-control-lg">


            <label for="${newInputId}" class="form-label fs-base">Coordinates</label>
            <input type="text"  id="${newInputId}" class="form-control form-control-lg">

      
          </div>
      
          </div>
      </div>
    </div>
  `;


  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = newStopHtml.trim();
  container.appendChild(tempDiv.firstChild);

  initMap(newMapId, newInputId, newLatId, newLngId);
}

// DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', function() {
  // Initialize existing maps
  //initMap('map-origin', 'originInput');
  //initMap('map-destination', 'destinationInput');
  // Event listeners for adding stops
  const addOriginStopBtn = document.getElementById('addStopBtn');
  const originStopsContainer = document.querySelector('.stops');
  let originStopCount = 1;

  addOriginStopBtn.addEventListener('click', function() {
    addStop(originStopsContainer, 'originStop', originStopCount);

    originStopCount++;
  });

  const addDestinationStopBtn = document.getElementById('addFinalStopBtn');
  const destinationStopsContainer = document.querySelector('.finalStops');
  let destinationStopCount = 1;

  addDestinationStopBtn.addEventListener('click', function() {
    addStop(destinationStopsContainer, 'destinationStop', destinationStopCount);
    destinationStopCount++;
  });
});

// Google Maps API callback
function googleMapsCallback() {
  initMap('map-origin', 'originInput', 'originLatidude', 'originLongitude');
  initMap('map-destination', 'destinationInput', 'destinationLatitude', 'destinationLongitude');
}


//Autocomplete functionality
function initAutocomplete() {
    var inputs = document.querySelectorAll('.form__input-autocomplete--map');
    
    inputs.forEach(function(input) {
        new google.maps.places.Autocomplete(input);
    });
}

var autocomplete;

function initAutocomplete() {
    autocomplete = new google.maps.places.Autocomplete(
        document.getElementById('autocompleteInput'),
        { types: ['geocode'] }
    );

    autocomplete.addListener('place_changed', onPlaceChanged);
}

function onPlaceChanged() {
    var place = autocomplete.getPlace();
    if (!place.geometry) {
        // User entered the name of a Place that was not suggested and pressed the Enter key, or the Place Details request failed.
        console.log("No details available for input: '" + place.name + "'");
        return;
    }

    // Log the latitude and longitude to the console
    console.log('Latitude: ' + place.geometry.location.lat());
    console.log('Longitude: ' + place.geometry.location.lng());
}




--FILE template-parts\head.php
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Folotruck | Account - Sign Up</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Folotruck - dashboard for user managment">
  <meta name="keywords" content="">
  <meta name="author" content="U24web">

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon and Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Vendor Styles -->
  <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/css/boxicons.min.css" />

  <!-- Main Theme Styles + Bootstrap -->
  <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

  <!-- Page loading styles -->
  <style>
    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    .dark-mode .page-loading {
      background-color: #0b0f19;
    }

    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }

    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .page-loading.active>.page-loading-inner {
      opacity: 1;
    }

    .page-loading-inner>span {
      display: block;
      font-size: 1rem;
      font-weight: normal;
      color: #9397ad;
    }

    .dark-mode .page-loading-inner>span {
      color: #fff;
      opacity: .6;
    }

    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      border: .15em solid #b4b7c9;
      border-right-color: transparent;
      border-radius: 50%;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }

    .dark-mode .page-spinner {
      border-color: rgba(255, 255, 255, .4);
      border-right-color: transparent;
    }

    @-webkit-keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    @keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- Theme mode -->
  <script>
    let mode = window.localStorage.getItem('mode'),
      root = document.getElementsByTagName('html')[0];
    if (mode !== null && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }
  </script>

  <!-- Page loading scripts -->
  <script>
    (function() {
      window.onload = function() {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function() {
          preloader.remove();
        }, 1000);
      };
    })();
  </script>
</head>


--FILE template-parts\menu-login.php
<header class="header navbar navbar-expand-lg position-absolute navbar-sticky">
        <div class="container px-3">
        <a href="index.html" class="navbar-brand ">
          
          <img class="logo" src="assets/img/logo.svg" width="160" alt="Silicon">
          <img class="logo--dark" src="assets/img/logo-white-text.png" width="160" alt="Silicon">

        </a>
          <div id="navbarNav" class="offcanvas offcanvas-end">
            <div class="offcanvas-header border-bottom">
              <h5 class="offcanvas-title">Menu</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav me-3 mb-2 mb-lg-0  justify-content-md-end dark-mode">
                  <li class="nav-item">
                      <a href="/" class="nav-link">Login</a>
                    </li> 
                    <li class="nav-item">
                      <a href="/account-signup.php" class="nav-link">Sign up</a>
                    </li>
              </ul>
            </div>
          
          </div>

          

          <div class="d-none d-md-flex align-items-center order-lg-2 ms-auto">
          <!-- <a href="#searchCollapse" class="nav-link px-2" data-bs-toggle="collapse">
            <i class="bx bx-search text-light fs-4 mx-1"></i>
          </a>
          <a href="#" class="nav-link d-none d-lg-block">
            <i class="bx bx-user text-light fs-4 mx-1"></i>
          </a>
   -->
        </div>
        <div class="d-block d-md-block form-check form-switch mode-switch pe-lg-1 ms-auto" data-bs-toggle="mode">
          <input type="checkbox" class="form-check-input" id="theme-mode">
          <!-- <label class="form-check-label d-none d-sm-block" for="theme-mode">Mode</label>
          <label class="form-check-label d-none d-sm-block" for="theme-mode"></label>  -->
        </div>
 

          <button type="button" class="navbar-toggler me-4 me-md-0" data-bs-toggle="offcanvas" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <!-- <a href="https://themes.getbootstrap.com/product/silicon-business-technology-template-ui-kit/" class="btn btn-primary btn-sm fs-sm rounded d-none d-lg-inline-flex" target="_blank" rel="noopener">
            <i class="bx bx-cart fs-5 lh-1 me-1"></i>
            &nbsp;Buy now
          </a> -->
        </div>
      </header>

--FILE backend\mobile\change-pin.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $username = mysqli_real_escape_string($conn, $data['username'] ?? '');
    $pin = mysqli_real_escape_string($conn, $data['pin'] ?? ''); // Get the PIN from the JSON payload

    // Prepare SQL statement to prevent SQL injection
    // Order the results by some_id in descending order
    $stmt = $conn->prepare("SELECT PIN FROM drivers WHERE username = ? ORDER BY some_id DESC");
    $stmt->bind_param("s", $username);

    if ($stmt->execute()) {
        $result = $stmt->get_result();
        if ($result->num_rows > 0) {
            $row = $result->fetch_assoc();

            // Check if the provided PIN matches the stored PIN
            if ($row['PIN'] === $pin) {
                echo json_encode(["success" => "PIN verified successfully"]);
                http_response_code(200);
            } else {
                echo json_encode(["error" => "Invalid PIN"]);
                http_response_code(401); // Unauthorized access
            }
        } else {
            echo json_encode(["error" => "User not found"]);
            http_response_code(404);
        }
    } else {
        echo json_encode(["error" => "Internal server error"]);
        http_response_code(500);
    }

    $stmt->close();
    $conn->close();
}
?>

--FILE backend\mobile\check-pin.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection
    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $username = mysqli_real_escape_string($conn, $data['username'] ?? '');
    $pin = mysqli_real_escape_string($conn, $data['pin'] ?? ''); // Get the PIN from the JSON payload

    // Prepare SQL statement to prevent SQL injection
    // Order the results by some_id in descending order and limit to the first row
    $stmt = $conn->prepare("SELECT PIN FROM drivers WHERE username = ? ORDER BY some_id DESC LIMIT 1");
    $stmt->bind_param("s", $username);


    if ($stmt->execute()) {
        $result = $stmt->get_result();
        if ($result->num_rows > 0) {
            $row = $result->fetch_assoc();

            // Check if the provided PIN matches the stored PIN
            if ($row['PIN'] == $pin) {
                echo json_encode(["success" => "PIN verified successfully"]);
                http_response_code(200);
            } else {
                echo json_encode(
                    
                    ["error" => "Invalid PIN",
                    "timestamp" => date("Y-m-d H:i:s"), // Current timestamp
                    "attemptedPIN" => $pin, // The PIN that was tried
                    "correctPIN"=>$row['PIN']
            ]);
                http_response_code(401); // Unauthorized access
            }
        } else {
            echo json_encode(["error" => "User not found"]);
            http_response_code(404);
        }
    } else {
        echo json_encode(["error" => "Internal server error"]);
        http_response_code(500);
    }

    $stmt->close();
    $conn->close();
}
?>

--FILE backend\mobile\cred.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
      /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);
    $username = mysqli_real_escape_string($conn, $data['username'] ?? '');
    $password = $data['password'] ?? '';

    // Prepare SQL statement to prevent SQL injection
    // Order the results by some_id in descending order
    $stmt = $conn->prepare("SELECT * FROM drivers WHERE username = ? ORDER BY some_id DESC");
    $stmt->bind_param("s", $username);

    if ($stmt->execute()) {
        $result = $stmt->get_result();

        if ($result->num_rows > 0) {
            $loginSuccessful = false;
            while ($user = $result->fetch_assoc()) {
                if (password_verify($password, $user['password'])) { // Verify the password
                    $loginSuccessful = true;
                    break; // Breaks on the first successful match, which is the one with the highest some_id
                }
            }

            if ($loginSuccessful) {
                echo json_encode([
                    'data' => 'success',
                    'username' => $user['username'],
                    'total_destination' => $user['total_destination'], 
                    'driver_id' => $user['driver_id'],
                    'user_id' => $user['user_id'],
                    'waypoints' => $user['waypoints'], // Retrieve waypoints as JSON string
                    'some_id' => $user['some_id'] // Added for clarity
                ]);
            } else {
                http_response_code(401);
                echo json_encode(["error" => "Invalid credentials"]);
            }
        } else {
            http_response_code(401);
            echo json_encode(["error" => "Invalid credentials2"]);
        }
    } else {
        http_response_code(500);
        echo json_encode(["error" => "Internal server error3"]);
    }

    $stmt->close();
    $conn->close();
}
?>


--FILE backend\mobile\db.php
<?php

function checkDatabaseConnection(){

    if (!defined('DB_SERVER')) {
        define('DB_SERVER', 'srv1213.hstgr.io');
    }
    
    if (!defined('DB_USERNAME')) {
        define('DB_USERNAME', 'u428535412_folotruck');
    }
    
    if (!defined('DB_PASSWORD')) {
        define('DB_PASSWORD', 'bsKHY2%tX3rPyFm&nV');
    }
    
    if (!defined('DB_DATABASE')) {
        define('DB_DATABASE', 'u428535412_folotruck');
    }

    // Create connection
    $conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    }
     /** @var mysqli $conn */
    return $conn;
}
?>

--FILE backend\mobile\is-pin.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
   /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $username = mysqli_real_escape_string($conn, $data['username'] ?? '');

    // Prepare SQL statement to prevent SQL injection
    $stmt = $conn->prepare("SELECT PIN FROM drivers WHERE username = ?");
    $stmt->bind_param("s", $username);

    if ($stmt->execute()) {
        $result = $stmt->get_result();
        if ($result->num_rows > 0) {
            $row = $result->fetch_assoc();
            $pinSet = !is_null($row['PIN']) && $row['PIN'] !== '';

            echo json_encode(["pinSet" => $pinSet]);
        } else {
            echo json_encode(["error" => "User not found"]);
            http_response_code(404);
        }
    } else {
        echo json_encode(["error" => "Internal server error"]);
        http_response_code(500);
    }

    $stmt->close();
    $conn->close();
}
?>


--FILE backend\mobile\reset-status.php
<?php
include_once 'db.php'; 

header("Access-Control-Allow-Origin: *");
header("Content-Type: application/json");
header("Access-Control-Allow-Methods: POST");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $userRole = mysqli_real_escape_string($conn, $data['userRole'] ?? '');
    $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
    $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');

    // SQL query to reset the status
    $stmt = $conn->prepare("UPDATE drivers SET status = '' WHERE username = ? AND driver_id = ? AND user_id = ?");
    $stmt->bind_param("sss", $userRole, $driverId, $userId);

    $statusResetSuccessful = $stmt->execute();
    $stmt->close();

    // If the status was reset successfully, proceed to clean the database
    if ($statusResetSuccessful) {
        // Specify the table name
        $tableName = "driver_" . $userId . "_" . $driverId . "_data";

        // SQL query to delete all records from the specific table
        $stmt = $conn->prepare("DELETE FROM $tableName");
        
        if ($stmt->execute()) {
            echo json_encode(['success' => 'Status reset and data deleted successfully']);
        } else {
            http_response_code(500);
            echo json_encode(["error" => "Failed to delete data"]);
        }

        $stmt->close();
    } else {
        http_response_code(500);
        echo json_encode(["error" => "Failed to reset status"]);
    }

    $conn->close();
}
?>


--FILE backend\mobile\set-status.php
<?php
include_once 'db.php'; 

header("Access-Control-Allow-Origin: *");
header("Content-Type: application/json");
header("Access-Control-Allow-Methods: POST");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $userRole = mysqli_real_escape_string($conn, $data['userRole'] ?? '');
    $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
    $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');
    $newStatus = mysqli_real_escape_string($conn, $data['status'] ?? '');  

    // SQL query to get the current status
    $stmt = $conn->prepare("SELECT status FROM drivers WHERE username = ? AND driver_id = ? AND user_id = ?");
    $stmt->bind_param("sss", $userRole, $driverId, $userId);
    $stmt->execute();
    $result = $stmt->get_result();
    $currentStatus = '';
    if ($result->num_rows > 0) {
        $row = $result->fetch_assoc();
        $currentStatus = $row['status'];
    }
    $stmt->close();

    // Splitting the current status string into an array
    $statusArray = empty($currentStatus) ? [] : explode(',', $currentStatus);

    // Adding the new status to the status array
    array_push($statusArray, $newStatus);

    // Joining the status array into a comma-separated string
    $updatedStatus = implode(',', $statusArray);

    // SQL query to update the status
    $stmt = $conn->prepare("UPDATE drivers SET status = ? WHERE username = ? AND driver_id = ? AND user_id = ?");
    $stmt->bind_param("ssss", $updatedStatus, $userRole, $driverId, $userId);

    if ($stmt->execute()) {
        echo json_encode(['success' => 'Status updated successfully']);
    } else {
        http_response_code(500);
        echo json_encode(["error" => "Failed to update status"]);
    }

    $stmt->close();
    $conn->close();
}
?>


--FILE backend\mobile\status.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Content-Type: application/json");
header("Access-Control-Allow-Methods: POST");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection
    
    $json = file_get_contents('php://input');
    $data = json_decode($json, true);

    $userRole = mysqli_real_escape_string($conn, $data['userRole'] ?? '');
    $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
    $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');


    // Query to get the status based on userRole and driverId
    $stmt = $conn->prepare("SELECT status FROM drivers WHERE username = ? AND driver_id = ? AND user_id = ?");
    $stmt->bind_param("sss", $userRole, $driverId, $userId);

    if ($stmt->execute()) {
        $result = $stmt->get_result();

        if ($result->num_rows > 0) {
            $data = $result->fetch_assoc();
            echo json_encode(['status' => $data['status']]);
        } else {
            http_response_code(404);
            echo json_encode(["error" => "Data not found"]);
        }
    } else {
        http_response_code(500);
        echo json_encode(["error" => "Internal server error"]);
    }

    $stmt->close();
    $conn->close();
}
?>

--FILE backend\mobile\store-image.bkc
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");


// include_once 'backend/db.php'; // Include database connection file

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
     // Terminate the script after sending the response

    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection


    
    $json = file_get_contents('php://input');
    $data = json_decode($json, true);
    $username = mysqli_real_escape_string($conn, $data['username'] ?? ''); // Escape user inputs for security
    $password = $data['password'] ?? '';


    if(str_contains($data['message'],'have')){
        http_response_code(200);
        echo json_encode(["success" => "Message submitted"]);


        $json = file_get_contents('php://input');
        $data = json_decode($json, true);
        $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
        $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');
        $message = mysqli_real_escape_string($conn, $data['message'] ?? '');
        $messageValue = mysqli_real_escape_string($conn, $data['messageValue'] ?? '');
        $routeDirection = mysqli_real_escape_string($conn, $data['routeDirection'] ?? '');
        $submittedTime = mysqli_real_escape_string($conn, $data['submittedTime'] ?? '');
        $photo = $data['photo'] ?? '';  // No need to escape base64
        $photo = "hello" ?? '';  // No need to escape base64

        $tableName = "driver_" . $userId . "_" . $driverId . "_data";

        // if($photo) { // If photo is included in the JSON data
        //     $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value, message_image) VALUES (?, ?, ?, ?)");
        //     $stmt->bind_param("ssss", $message, $submittedTime, $messageValue, $photo);
        // } else {
            $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value) VALUES (?, ?, ?)");
            $stmt->bind_param("sss", $message, $submittedTime, $messageValue );
        //}
        if($stmt->execute()) {
            http_response_code(200);
            echo json_encode(["success" => "Message submitted"]);
        } else {
            http_response_code(500);
            echo json_encode(["error" => "Error in submitting message"]);
        }

    }
}



--FILE backend\mobile\store-image.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection

    $json = file_get_contents('php://input');
    $data = json_decode($json, true);
    
    if(str_contains($data['message'],'have')){
        $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
        $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');
        $message = mysqli_real_escape_string($conn, $data['message'] ?? '');
        $messageValue = mysqli_real_escape_string($conn, $data['messageValue'] ?? '');
        $submittedTime = mysqli_real_escape_string($conn, $data['submittedTime'] ?? '');
        $photo = $data['photo'] ?? '';

        $tableName = "driver_" . $userId . "_" . $driverId . "_data";

        if($photo) {
            // Decode base64 string
                        // Remove the prefix from the base64 string
            list($type, $photoBase64) = explode(';', $photo);
            list(, $photoBase64) = explode(',', $photoBase64);
            $photoDecoded = base64_decode($photoBase64);
            
            // Define the upload path, you might need to adjust the path according to your structure
            $uploadPath = "images/";

            // Generate a unique file name
            $fileName = uniqid() . ".jpg";
            
            // Save the file
            file_put_contents($uploadPath . $fileName, $photoDecoded);
            
            // Prepare SQL statement with image path
            $imagePath = "\images\\" . $fileName;
            $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value, message_image) VALUES (?, ?, ?, ?)");
            $stmt->bind_param("ssss", $message, $submittedTime, $messageValue, $imagePath);
        } else {
            $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value) VALUES (?, ?, ?)");
            $stmt->bind_param("sss", $message, $submittedTime, $messageValue);
        }

        if($stmt->execute()) {
            http_response_code(200);
            echo json_encode(["success" => "Message submitted"]);
        } else {
            http_response_code(500);
            echo json_encode(["error" => "Error in submitting message"]);
        }
    }
}


--FILE backend\mobile\store.php
<?php
include_once 'db.php'; // Include database connection file

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Content-Type");


// include_once 'backend/db.php'; // Include database connection file

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
     // Terminate the script after sending the response

    /** @var mysqli $conn */
    $conn = checkDatabaseConnection();  // Get the database connection


    
    $json = file_get_contents('php://input');
    $data = json_decode($json, true);
    $username = mysqli_real_escape_string($conn, $data['username'] ?? ''); // Escape user inputs for security
    $password = $data['password'] ?? '';

    if(str_contains($data['message'],'have')){
        http_response_code(200);
        echo json_encode(["success" => "Message submitted"]);


        $json = file_get_contents('php://input');
        $data = json_decode($json, true);
        $driverId = mysqli_real_escape_string($conn, $data['driverId'] ?? '');
        $userId = mysqli_real_escape_string($conn, $data['userId'] ?? '');
        $message = mysqli_real_escape_string($conn, $data['message'] ?? '');
        $messageValue = mysqli_real_escape_string($conn, $data['messageValue'] ?? '');
        $routeDirection = mysqli_real_escape_string($conn, $data['routeDirection'] ?? '');
        $submittedTime = mysqli_real_escape_string($conn, $data['submittedTime'] ?? '');
        $photo = $data['photo'] ?? '';  // No need to escape base64


        $tableName = "driver_" . $userId . "_" . $driverId . "_data";

        if($photo) { // If photo is included in the JSON data
            $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value, message_image) VALUES (?, ?, ?, ?)");
            $stmt->bind_param("ssss", $message, $submittedTime, $messageValue, $photo);
        } else {
            $stmt = $conn->prepare("INSERT INTO $tableName (message_type, message_time, message_value) VALUES (?, ?, ?)");
            $stmt->bind_param("sss", $message, $submittedTime, $messageValue );
        }
        if($stmt->execute()) {
            http_response_code(200);
            echo json_encode(["success" => "Message submitted"]);
        } else {
            http_response_code(500);
            echo json_encode(["error" => "Error in submitting message"]);
        }

    }
    else{

    // Prepare SQL statement to prevent SQL injection
    $stmt = $conn->prepare("SELECT * FROM drivers WHERE username = ?");
    $stmt->bind_param("s", $username);

    if ($stmt->execute()) {
        $result = $stmt->get_result();

        if ($result->num_rows > 0) {
            $user = $result->fetch_assoc();

            if (password_verify($password, $user['password'])) { // Verify the password
                echo json_encode([
                    'data' => 'success',
                    'username' => $user['username'],
                    'total_destination' => $user['total_destination'], 
                    'driver_id' => $user['driver_id'],  // add driver_id to the response
                    'user_id' => $user['user_id']        // add user_id to the response
                ]);
               
                //unset($user['password']); // Remove password before sending back user data
                // echo json_encode($user);
            } else {
                http_response_code(401);
                echo json_encode(["error" => "Invalid credentials1"]);
            }
        } else {
            http_response_code(401);
            echo json_encode(["error" => "Invalid credentials2"]);
        }
    } else {
        http_response_code(500);
        echo json_encode(["error" => "Internal server error3"]); // Consider logging the error server-side and not exposing this to the client
    }

    $stmt->close();
    }
    $conn->close();
}




--FILE template-parts\footer\footer.php
  <!-- Footer -->
  <footer class="footer dark-mode bg-dark border-top border-light pt-5 pb-4 pb-lg-5">
    <div class="container pt-lg-4">
      <div class="row pb-5">
        <div class="col-lg-4 col-md-6">
          <div class="navbar-brand text-dark p-0 me-0 mb-3 mb-lg-4">
            <img class="logo" src="assets/img/logo-white-text.png" width="140" alt="Silicon">
            <img class="logo--dark" src="assets/img/logo-white-text.png" width="140" alt="Silicon">

          </div>
          <p class="fs-sm text-light opacity-70 pb-lg-3 mb-4">Proin ipsum pharetra, senectus eget scelerisque varius
            pretium platea velit. Lacus, eget eu vitae nullam proin turpis etiam mi sit. Non feugiat feugiat egestas
            nulla nec. Arcu tempus, eget elementum dolor ullamcorper sodales ultrices eros.</p>
          <form class="needs-validation" novalidate>
            <label for="subscr-email" class="form-label">Subscribe to our newsletter</label>
            <div class="input-group">
              <input type="email" id="subscr-email" class="form-control rounded-start ps-5" placeholder="Your email" required>
              <i class="bx bx-envelope fs-lg text-muted position-absolute top-50 start-0 translate-middle-y ms-3 zindex-5"></i>
              <div class="invalid-tooltip position-absolute top-100 start-0">Please provide a valid email address.</div>
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </div>
          </form>
        </div>
        <div class="col-xl-6 col-lg-7 col-md-5 offset-xl-2 offset-md-1 pt-4 pt-md-1 pt-lg-0">
          <div id="footer-links" class="row">
            <div class="col-lg-4">
              <h6 class="mb-2">
                <a href="#useful-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Useful Links</a>
              </h6>
              <div id="useful-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column pb-lg-1 mb-lg-3">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Home</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">About</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Services</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Our Clients</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">News</a></li>
                </ul>
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Terms &amp;
                      Conditions</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Privacy Policy</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-3">
              <h6 class="mb-2">
                <a href="#social-links" class="d-block text-dark dropdown-toggle d-lg-none py-2" data-bs-toggle="collapse">Socials</a>
              </h6>
              <div id="social-links" class="collapse d-lg-block" data-bs-parent="#footer-links">
                <ul class="nav flex-column mb-2 mb-lg-0">
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Facebook</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">LinkedIn</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Twitter</a></li>
                  <li class="nav-item"><a href="#" class="nav-link d-inline-block px-0 pt-1 pb-2">Instagram</a></li>
                </ul>
              </div>
            </div>
            <div class="col-xl-4 col-lg-5 pt-2 pt-lg-0">
              <h6 class="mb-2">Contact Us</h6>
              <a href="mailto:email@u24web.com" class="fw-medium">email@u24web.com</a>
            </div>
          </div>
        </div>
      </div>
      <p class="nav d-block fs-xs text-center text-md-start pb-2 pb-lg-0 mb-0">
        <span class="text-light opacity-50">&copy; All rights reserved. Made by </span>
        <a class="nav-link d-inline-block p-0" href="https://u24web.com" target="_blank" rel="noopener">U24web</a>
      </p>
    </div>
  </footer>


--FILE template-parts\header\head-logged.php

<?php
if (!isset($pageTitle)) {
    $pageTitle = "Default Title"; // Set a default title if none is provided
}
?>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Silicon | Account - Details</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Silicon - Multipurpose Technology Bootstrap Template">
  <meta name="keywords" content="bootstrap, business, creative agency, mobile app showcase, saas, fintech, finance, online courses, software, medical, conference landing, services, e-commerce, shopping cart, multipurpose, shop, ui kit, marketing, seo, landing, blog, portfolio, html5, css3, javascript, gallery, slider, touch, creative">
  <meta name="author" content="U24web">

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon and Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
  <link rel="shortcut icon" href="assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Vendor Styles -->
  <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/css/boxicons.min.css" />

  <!-- Main Theme Styles + Bootstrap -->
  <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

  <!-- Page loading styles -->
  <style>
    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    .dark-mode .page-loading {
      background-color: #0b0f19;
    }

    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }

    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .page-loading.active>.page-loading-inner {
      opacity: 1;
    }

    .page-loading-inner>span {
      display: block;
      font-size: 1rem;
      font-weight: normal;
      color: #9397ad;
    }

    .dark-mode .page-loading-inner>span {
      color: #fff;
      opacity: .6;
    }

    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      border: .15em solid #b4b7c9;
      border-right-color: transparent;
      border-radius: 50%;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }

    .dark-mode .page-spinner {
      border-color: rgba(255, 255, 255, .4);
      border-right-color: transparent;
    }

    @-webkit-keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }

    @keyframes spinner {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- Theme mode -->
  <script>
    let mode = window.localStorage.getItem('mode'),
      root = document.getElementsByTagName('html')[0];
    if (mode !== null && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }
  </script>

  <!-- Page loading scripts -->
  <script>
    (function() {
      window.onload = function() {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function() {
          preloader.remove();
        }, 1000);
      };
    })();
  </script>
</head>

